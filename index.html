<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DevOps Deployment & Updates Guide</title>
  <style>
    :root {
      --bg: #0f172a;
      --bg-elevated: #020617;
      --bg-card: #020617;
      --border-subtle: #1e293b;
      --accent: #38bdf8;
      --accent-soft: rgba(56,189,248,0.12);
      --accent-strong: rgba(56,189,248,0.35);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --text-strong: #f9fafb;
      --danger: #f97373;
      --danger-soft: rgba(248,113,113,0.16);
      --success: #4ade80;
      --success-soft: rgba(74,222,128,0.18);
      --warning: #facc15;
      --warning-soft: rgba(250,204,21,0.16);
      --code-bg: #020617;
      --code-border: #1f2937;
      --table-header-bg: #020617;
      --table-row-alt: #020617;
      --badge-bg: #020617;
      --badge-border: #1f2937;
      --shadow-soft: 0 18px 45px rgba(15,23,42,0.9);
      --radius-lg: 14px;
      --radius-md: 10px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #1d283a 0, #020617 40%, #000 100%);
      color: var(--text-main);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      padding: 32px 16px 48px;
    }

    .page-shell {
      width: 80%;
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    @media (max-width: 960px) {
      .page-shell {
        width: 100%;
      }

      body {
        padding: 20px 12px 40px;
      }
    }

    .main-card {
      background: linear-gradient(135deg, rgba(15,23,42,0.98), rgba(15,23,42,0.98));
      border-radius: 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148,163,184,0.18);
      padding: 26px 28px 28px;
      backdrop-filter: blur(10px);
    }

    .toc-card {
      background: radial-gradient(circle at top, rgba(56,189,248,0.08), rgba(15,23,42,0.98));
      border-radius: 18px;
      box-shadow: 0 18px 40px rgba(15,23,42,0.95);
      border: 1px solid rgba(56,189,248,0.4);
      padding: 18px 18px 20px;
      margin-bottom: 4px;
    }

    @media (max-width: 960px) {
      .main-card {
        padding: 20px 16px 22px;
      }

      .toc-card {
        position: static;
        order: -1;
        margin-bottom: 4px;
      }
    }

    .doc-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 10px;
      margin-bottom: 18px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .badge {
      border-radius: var(--radius-pill);
      padding: 4px 10px;
      border: 1px solid var(--badge-border);
      background: radial-gradient(circle at top left, rgba(148,163,184,0.2), rgba(15,23,42,0.9));
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge span.label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      color: var(--text-muted);
    }

    .badge span.value {
      font-weight: 600;
      color: var(--text-strong);
    }

    h1, h2, h3, h4, h5 {
      color: var(--text-strong);
      margin-top: 1.6em;
      margin-bottom: 0.45em;
      line-height: 1.25;
    }

    h1 {
      font-size: 2rem;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(148,163,184,0.35);
      margin-top: 0;
    }

    h2 {
      font-size: 1.35rem;
      margin-top: 1.8em;
      border-left: 3px solid var(--accent);
      padding-left: 10px;
    }

    h3 {
      font-size: 1.1rem;
      color: #e5e7eb;
    }

    h4 {
      font-size: 1rem;
      color: #cbd5f5;
    }

    p {
      margin: 0.35em 0 0.6em;
      font-size: 0.95rem;
    }

    strong { color: #e5e7eb; }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.82rem;
      background: rgba(15,23,42,0.85);
      border-radius: 5px;
      padding: 1px 5px;
      border: 1px solid var(--code-border);
      color: #e5e7eb;
    }

    pre {
      background: var(--code-bg);
      border-radius: 10px;
      padding: 10px 12px;
      border: 1px solid var(--code-border);
      overflow-x: auto;
      font-size: 0.82rem;
      line-height: 1.5;
      margin: 10px 0 14px;
    }

    pre code {
      background: transparent;
      border: none;
      padding: 0;
    }

    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }

    ul, ol { padding-left: 1.2rem; }
    li { margin: 2px 0; }

    hr {
      border: none;
      border-top: 1px dashed rgba(148,163,184,0.45);
      margin: 18px 0 18px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0 18px;
      font-size: 0.88rem;
      background: radial-gradient(circle at top left, rgba(15,23,42,0.98), #020617);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,0.35);
    }

    thead {
      background: linear-gradient(90deg, rgba(15,23,42,0.95), rgba(30,64,175,0.9));
    }

    thead th {
      padding: 7px 9px;
      text-align: left;
      font-weight: 600;
      color: #e5e7eb;
      border-bottom: 1px solid rgba(148,163,184,0.5);
      white-space: nowrap;
    }

    tbody tr:nth-child(even) {
      background: rgba(15,23,42,0.85);
    }

    tbody td {
      padding: 6px 9px;
      border-bottom: 1px solid rgba(30,41,59,0.9);
      vertical-align: top;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    .status-ok { color: var(--success); font-weight: 600; }
    .status-warn { color: var(--warning); font-weight: 600; }
    .status-bad { color: var(--danger); font-weight: 600; }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 1px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.45);
      font-size: 0.75rem;
      background: rgba(15,23,42,0.9);
      gap: 4px;
      white-space: nowrap;
    }

    .pill.exp { border-color: var(--danger); background: var(--danger-soft); color: #fecaca; }
    .pill.std { border-color: var(--accent); background: var(--accent-soft); }
    .pill.fixed { border-color: var(--warning); background: var(--warning-soft); }
    .pill.int { border-color: #a855f7; background: rgba(168,85,247,0.16); }

    .toc-card h2, .toc-card h3 {
      border: none;
      padding-left: 0;
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #e5e7eb;
    }

    .toc-card ol {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 0.9rem;
    }

    .toc-card li {
      margin: 3px 0;
    }

    .toc-link {
      display: block;
      padding: 4px 6px;
      border-radius: 8px;
      color: var(--text-main);
      text-decoration: none;
    }

    .toc-link:hover {
      background: rgba(15,23,42,0.92);
      color: var(--accent);
    }

    .toc-section-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .toc-card small {
      display: block;
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .banner {
      border-radius: 12px;
      padding: 9px 11px;
      border: 1px solid rgba(56,189,248,0.5);
      background: linear-gradient(120deg, rgba(56,189,248,0.22), rgba(15,23,42,0.92));
      font-size: 0.83rem;
      margin-bottom: 12px;
    }

    .banner strong { color: #f9fafb; }

  </style>
</head>
<body>
<div class="page-shell">
  <aside class="toc-card">
    <div class="toc-section-label">Overview</div>
    <h2>Contents</h2>
    <ol>
      <li><a class="toc-link" href="#executive-summary">Executive Summary</a></li>
      <li><a class="toc-link" href="#team-structure-kanban-workflow">Team Structure &amp; Kanban</a></li>
      <li><a class="toc-link" href="#cross-team-coordination-communication">Cross-Team Coordination</a></li>
      <li><a class="toc-link" href="#api-development-standards-openapi-required">API Standards &amp; Versioning</a></li>
      <li><a class="toc-link" href="#kafka-event-driven-communication">Kafka &amp; Events</a></li>
      <li><a class="toc-link" href="#deployment-process-overview">Deployment Process</a></li>
      <li><a class="toc-link" href="#git-branching-strategy--feature-stand-deployment">Git Branching &amp; Feature Stands</a></li>
      <li><a class="toc-link" href="#release-pipeline-automation">Release Pipeline</a></li>
      <li><a class="toc-link" href="#database-migrations-strategy">DB Migrations</a></li>
      <li><a class="toc-link" href="#release-checklist-management">Release Management</a></li>
      <li><a class="toc-link" href="#incident-management-process">Incident Management</a></li>
      <li><a class="toc-link" href="#post-incident-review-postmortem">Postmortems</a></li>
      <li><a class="toc-link" href="#tools-integration-recommendations">Tools &amp; Integrations</a></li>
      <li><a class="toc-link" href="#knowledge-documentation-standards">Knowledge &amp; Onboarding</a></li>
    </ol>
    <small>Links above rely on existing section IDs generated from the markdown (e.g. <code>#executive-summary</code>).</small>
  </aside>
  <main class="main-card">
    <div class="banner"><strong>DevOps Deployment &amp; Updates Guide</strong> ‚Äî formatted for easier reading, with improved layout, tables and code styling. Original content is preserved.</div>
    <div class="doc-meta">
      <div class="badge"><span class="label">Version</span><span class="value">2.0</span></div>
      <div class="badge"><span class="label">Last Updated</span><span class="value">Dec 2025</span></div>
      <div class="badge"><span class="label">Audience</span><span class="value">Dev ¬∑ Ops ¬∑ Release</span></div>
    </div><p>Perfect! Now I have comprehensive information about Kafka Streams patterns, team size considerations for WIP limits, and OpenAPI for microservices communication. Let me update the document with the specific team details and technology stack.</p>
<h1 id="devops-deployment-updates-guide"><strong>DevOps Deployment &amp; Updates Guide</strong></h1>
<p><strong>Version:</strong> 2.0<br />
<strong>Last Updated:</strong> December 2025<br />
<strong>Audience:</strong> Development, Operations, Release Management Teams<br />
<strong>Tools Stack:</strong> Slack, Telegram, Jira, Confluence, Kubernetes, Java Microservices, PostgreSQL, Mobile Apps (iOS/Android), Website, <strong>HTTP/REST APIs, OpenAPI 3.0+, Apache Kafka, Kafka Streams</strong></p>
<p><strong>Team Structure:</strong></p>
<ul>
<li><strong>Retail Team</strong> (3 backend developers) - Larger, complex domain</li>
<li><strong>Core Team</strong> (2 backend developers) - Larger, complex domain</li>
<li><strong>AML Team</strong> (2 backend developers) - Smaller, specialized domain</li>
<li><strong>Redesign Team</strong> (1 backend developer) - Smaller, UI-focused domain</li>
</ul>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#executive-summary">Executive Summary</a></li>
<li><a href="#team-structure--kanban-workflow">Team Structure &amp; Kanban Workflow</a></li>
<li><a href="#cross-team-coordination--communication">Cross-Team Coordination &amp; Communication</a></li>
<li><a href="#api-development-standards-openapi-required">API Development Standards (OpenAPI Required)</a></li>
<li><a href="#kafka--event-driven-communication">Kafka &amp; Event-Driven Communication</a></li>
<li><a href="#deployment-process-overview">Deployment Process Overview</a></li>
<li><a href="#git-branching-strategy--feature-stand-deployment">Git Branching Strategy &amp; Feature Stand Deployment</a></li>
<li><a href="#release-pipeline--automation">Release Pipeline &amp; Automation</a></li>
<li><a href="#database-migrations-strategy">Database Migrations Strategy</a></li>
<li><a href="#release-checklist--management">Release Checklist &amp; Management</a></li>
<li><a href="#incident-management-process">Incident Management Process</a></li>
<li><a href="#post-incident-review-postmortem">Post-Incident Review (Postmortem)</a></li>
<li><a href="#tools--integration-recommendations">Tools &amp; Integration Recommendations</a></li>
<li><a href="#secure-git-data-practices">Secure Git Data Practices</a></li>
<li><a href="#knowledge-documentation-standards">Knowledge Documentation Standards</a></li>
</ol>
<hr />
<h2 id="executive-summary">Executive Summary</h2>
<p>This guide addresses critical organizational challenges across four cross-functional teams (Retail, Core, AML, Redesign) working on the same microservices platform using Kanban methodology.</p>
<h3 id="technology-stack">Technology Stack</h3>
<p><strong>Backend Communication:</strong></p>
<ul>
<li><strong>HTTP/REST APIs</strong>: Synchronous inter-service communication using OpenAPI 3.0+ specifications[1][2][3]</li>
<li><strong>Apache Kafka</strong>: Asynchronous event-driven messaging for decoupled service communication[4][5][6]</li>
<li><strong>Kafka Streams</strong>: Real-time stream processing for event sourcing and data transformation[6][7]</li>
</ul>
<p><strong>Core Problems Addressed:</strong></p>
<ol>
<li><strong>Knowledge Centralization Risk</strong>: Single-person dependencies eliminated through documentation</li>
<li><strong>Uncontrolled Deployments</strong>: Mandatory quality gates with automated enforcement</li>
<li><strong>Concurrent Team Conflicts</strong>: 4 teams modifying same services simultaneously</li>
<li><strong>API Versioning Chaos</strong>: Mobile apps can't deploy quickly; strict versioning required</li>
<li><strong>Missing Release Process</strong>: No formal checklists, ownership, or historical tracking</li>
<li><strong>Incident Response Gaps</strong>: No structured response or blameless postmortem culture</li>
</ol>
<p><strong>Key Principles:</strong></p>
<ul>
<li><strong>API-First Development</strong>: All APIs defined with OpenAPI specs before implementation</li>
<li><strong>Event-Driven Architecture</strong>: Kafka for asynchronous communication and event sourcing</li>
<li><strong>Continuous Flow</strong>: Kanban methodology with WIP limits and daily coordination</li>
<li><strong>Backward Compatibility</strong>: Mandatory for mobile clients with slow deployment cycles</li>
<li><strong>Automation First</strong>: Remove manual decision points, enforce with CI/CD</li>
<li><strong>Transparency</strong>: All deployments, incidents, and API changes are visible and traceable</li>
</ul>
<hr />
<h2 id="team-structure-kanban-workflow">Team Structure &amp; Kanban Workflow</h2>
<h3 id="team-composition-workload-distribution">Team Composition &amp; Workload Distribution</h3>
<table>
<thead>
<tr>
<th><strong>Team</strong></th>
<th><strong>Backend Developers</strong></th>
<th><strong>Complexity</strong></th>
<th><strong>Focus Area</strong></th>
<th><strong>WIP Limit Calculation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Retail</strong></td>
<td>3 devs</td>
<td>High</td>
<td>Customer-facing features, checkout, catalog</td>
<td>Team Size √ó 1.5 = <strong>4-5 items</strong></td>
</tr>
<tr>
<td><strong>Core</strong></td>
<td>2 devs</td>
<td>High</td>
<td>Authentication, payments, user management</td>
<td>Team Size √ó 1.5 = <strong>3 items</strong></td>
</tr>
<tr>
<td><strong>AML</strong></td>
<td>2 devs</td>
<td>Medium</td>
<td>Anti-money laundering, compliance</td>
<td>Team Size √ó 1.5 = <strong>3 items</strong></td>
</tr>
<tr>
<td><strong>Redesign</strong></td>
<td>1 dev</td>
<td>Low-Medium</td>
<td>UI modernization, frontend integration</td>
<td>Team Size √ó 2.0 = <strong>2 items</strong></td>
</tr>
</tbody>
</table>
<p><strong>WIP Limit Formula</strong>:[8][9]</p>
<pre><code>Optimal WIP = (Team Size √ó Base Factor) √ó Complexity Modifier

Base Factor: 1.5-2.0 for complex work, 2.0-2.5 for simpler work
Complexity Modifier: 1.0 for high complexity teams, 1.2 for medium complexity
</code></pre>
<h3 id="single-kanban-board-structure">Single Kanban Board Structure</h3>
<p><strong>Board Name:</strong> <code>Microservices Platform</code></p>
<pre><code>Swimlanes (by Team):
‚îú‚îÄ‚îÄ Retail Team (3 devs) - High complexity
‚îú‚îÄ‚îÄ Core Team (2 devs) - High complexity  
‚îú‚îÄ‚îÄ AML Team (2 devs) - Medium complexity
‚îî‚îÄ‚îÄ Redesign Team (1 dev) - Low-Medium complexity

Columns (Workflow States):
[Backlog] ‚Üí [Ready] ‚Üí [API Design] ‚Üí [In Progress] ‚Üí [Code Review] ‚Üí [Testing] ‚Üí [Done]
  ‚àû           12         8              10              6               8          -

WIP Limits per Column (Total across all teams):
- Backlog: No limit (prioritized by Product Owner)
- Ready: 12 items (3 per team average)
- API Design: 8 items (OpenAPI spec creation phase)
- In Progress: 10 items (Retail:4-5, Core:3, AML:3, Redesign:2)
- Code Review: 6 items (force fast reviews to prevent bottleneck)
- Testing: 8 items (QA capacity)
- Done: No limit (archived weekly)
</code></pre>
<p><strong>Why Single Board with Swimlanes?</strong>[10][11][8]</p>
<ul>
<li><strong>Unified Priority</strong>: Top items across all teams visible at once</li>
<li><strong>Visual Conflict Detection</strong>: See when Retail and Core both touch user-service</li>
<li><strong>Balanced Workload</strong>: Prevent Retail from hogging all WIP while Redesign waits</li>
<li><strong>Cross-Team Dependencies</strong>: Visible when AML depends on Core's payment changes</li>
<li><strong>Fair Resource Allocation</strong>: Smaller teams (Redesign) not overshadowed by larger teams (Retail)</li>
</ul>
<h3 id="team-specific-wip-limits">Team-Specific WIP Limits</h3>
<p><strong>Per-Team WIP Limits (In Progress Column)</strong>:[9][12][13][8]</p>
<pre><code>Retail Team (3 devs): 4-5 items max
‚îú‚îÄ‚îÄ 3 √ó 1.5 = 4.5 (high complexity work)
‚îú‚îÄ‚îÄ Developer 1: 1-2 items
‚îú‚îÄ‚îÄ Developer 2: 1-2 items
‚îî‚îÄ‚îÄ Developer 3: 1-2 items

Core Team (2 devs): 3 items max
‚îú‚îÄ‚îÄ 2 √ó 1.5 = 3 (high complexity, critical services)
‚îú‚îÄ‚îÄ Developer 1: 1-2 items
‚îî‚îÄ‚îÄ Developer 2: 1-2 items

AML Team (2 devs): 3 items max
‚îú‚îÄ‚îÄ 2 √ó 1.5 = 3 (medium complexity, compliance focus)
‚îú‚îÄ‚îÄ Developer 1: 1-2 items
‚îî‚îÄ‚îÄ Developer 2: 1-2 items

Redesign Team (1 dev): 2 items max
‚îú‚îÄ‚îÄ 1 √ó 2.0 = 2 (simpler UI work, less backend complexity)
‚îî‚îÄ‚îÄ Developer 1: 1-2 items
</code></pre>
<p><strong>Rule:</strong> No team can exceed their WIP limit. If limit reached, <strong>help other teams</strong> or <strong>clear code reviews</strong> before pulling new work.[14][9]</p>
<h3 id="classes-of-service-priority-tiers">Classes of Service (Priority Tiers)</h3>
<p>Tag all Jira issues with Class of Service to guide pull decisions:[15]</p>
<table>
<thead>
<tr>
<th><strong>Class</strong></th>
<th><strong>Label</strong></th>
<th><strong>Color</strong></th>
<th><strong>SLA</strong></th>
<th><strong>Example</strong></th>
<th><strong>% of WIP</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Expedite</strong></td>
<td><code>expedite</code></td>
<td>Red</td>
<td>&lt; 24 hours</td>
<td>Production incident, security vulnerability, payment outage</td>
<td>&lt; 5%</td>
</tr>
<tr>
<td><strong>Fixed Date</strong></td>
<td><code>fixed-date</code></td>
<td>Orange</td>
<td>Specific deadline</td>
<td>Mobile app store release, regulatory deadline, partner integration</td>
<td>15-20%</td>
</tr>
<tr>
<td><strong>Standard</strong></td>
<td><code>standard</code></td>
<td>Blue</td>
<td>Normal flow</td>
<td>New features, enhancements, non-critical bugs</td>
<td>60-70%</td>
</tr>
<tr>
<td><strong>Intangible</strong></td>
<td><code>intangible</code></td>
<td>Green</td>
<td>No deadline</td>
<td>Tech debt, refactoring, documentation, infrastructure improvements</td>
<td>15-20%</td>
</tr>
</tbody>
</table>
<p><strong>Priority Rules:</strong></p>
<ol>
<li><strong>Expedite</strong> preempts all other work; team swarms to resolve</li>
<li><strong>Fixed Date</strong> items escalate as deadline approaches</li>
<li><strong>Standard</strong> flows normally based on business value</li>
<li><strong>Intangible</strong> work prevented from accumulation (dedicate 15-20% capacity)</li>
</ol>
<h3 id="kanban-daily-standup-15-minutes-900-am-utc">Kanban Daily Standup (15 minutes, 9:00 AM UTC)</h3>
<p><strong>Format:</strong> All 4 teams participate (8 backend devs total)</p>
<p><strong>Agenda per team (3 min each):</strong></p>
<ol>
<li><strong>What we're pulling today</strong> (Backlog ‚Üí Ready ‚Üí API Design ‚Üí In Progress)</li>
<li><strong>Service locks</strong> (Which services are we actively modifying?)</li>
<li><strong>What we're releasing today</strong> (Testing ‚Üí Done, merging to main)</li>
<li><strong>Blockers</strong> (Dependencies on other teams, waiting for API contracts)</li>
</ol>
<p><strong>Slack Template (Posted Daily in <code>#kanban-sync</code>):</strong></p>
<pre><code class="language-markdown">üìã **Daily Kanban Sync - December 9, 2025**

**Retail Team** (3 devs, WIP: 4/5):
‚úÖ Pulling: RETAIL-456 (product-catalog-service/search optimization)  
üîí Active Services: product-catalog-service (In Code Review), checkout-service (In Progress)
üöÄ Releasing: RETAIL-432 (cart-service/add wishlist feature)
‚ùå Blocked: None

**Core Team** (2 devs, WIP: 3/3):
‚úÖ Pulling: None (at WIP limit, focusing on current items)
üîí Active Services: user-service/authentication (In Progress), payment-service (Code Review)
üöÄ Releasing: CORE-678 (auth-service/OAuth2 integration)
‚ùå Blocked: CORE-681 waiting on Retail's product-catalog API contract

**AML Team** (2 devs, WIP: 2/3):
‚úÖ Pulling: AML-234 (transaction-monitor-service/new risk rules)
üîí Active Services: transaction-monitor-service (In Progress)
üöÄ Releasing: AML-220 (compliance-report-service/PDF export)
‚ùå Blocked: None

**Redesign Team** (1 dev, WIP: 1/2):
‚úÖ Pulling: REDESIGN-123 (API integration for new checkout UI)
üîí Active Services: None (API Design phase for new work)
üöÄ Releasing: None
‚ùå Blocked: REDESIGN-123 waiting for Retail's checkout-service API spec (RETAIL-456)

**‚ö†Ô∏è Conflicts Detected:**
- **user-service/authentication**: Core Team actively working (CORE-678)
  - Redesign team planning work on user-service/profile (REDESIGN-130) - coordinate before starting
- **payment-service**: Core Team in Code Review (CORE-675)
  - No conflicts expected this week

**üìä Board Health:**
- Total WIP: 10/10 items (at capacity ‚úÖ)
- Code Review queue: 4/6 (healthy ‚úÖ)
- Testing queue: 5/8 (healthy ‚úÖ)
- Oldest item: RETAIL-401 (8 days in Testing - needs attention ‚ö†Ô∏è)
</code></pre>
<hr />
<h2 id="cross-team-coordination-communication">Cross-Team Coordination &amp; Communication</h2>
<h3 id="service-lock-coordination">Service Lock Coordination</h3>
<p><strong>Problem:</strong> Retail Team and Core Team both need to modify <code>user-service</code> authentication this week.</p>
<p><strong>Solution: First-to-Start Service Lock Protocol</strong>[16][17][18]</p>
<p><strong>Step 1: Announce Intent in Daily Standup</strong></p>
<p>Team announces: &quot;We plan to start work on [service]/[module] today&quot;</p>
<p><strong>Step 2: Visual Lock in Jira</strong></p>
<p>Add label to ticket: <code>lock:user-service-auth</code></p>
<p><strong>Step 3: Service Lock Rules</strong></p>
<table>
<thead>
<tr>
<th><strong>Scenario</strong></th>
<th><strong>Resolution</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Same service, different modules</strong></td>
<td>Both proceed independently</td>
<td>Core touches auth, Retail touches profile ‚úÖ</td>
</tr>
<tr>
<td><strong>Same service, same module</strong></td>
<td>First team to move to &quot;In Progress&quot; gets lock. Second team waits or coordinates</td>
<td>Core starts auth work Monday ‚Üí Retail waits or pairs with Core ‚è∏Ô∏è</td>
</tr>
<tr>
<td><strong>Expedite work</strong></td>
<td>Expedite preempts Standard work</td>
<td>Production auth bug (Expedite) ‚Üí Core pauses Standard work, swarms to fix üö®</td>
</tr>
<tr>
<td><strong>Fixed Date collision</strong></td>
<td>Product Owner prioritizes</td>
<td>Retail's mobile release (Dec 15) vs Core's partner integration (Dec 20) ‚Üí PO decides</td>
</tr>
</tbody>
</table>
<p><strong>Step 4: Pair Programming Option</strong></p>
<p>Instead of waiting, teams can <strong>pair program</strong> to complete work faster:</p>
<pre><code>Core Team + Retail Team ‚Üí Joint session on user-service auth
- Core dev leads (owns the lock)
- Retail dev assists (learns module, contributes)
- Result: Faster completion, knowledge sharing, no waiting
</code></pre>
<h3 id="codeowners-file-for-review-enforcement">CODEOWNERS File for Review Enforcement</h3>
<p>Create <code>.github/CODEOWNERS</code> in repository root:[19][20][21]</p>
<pre><code class="language-plaintext"># Global fallback
* @platform-lead

# Service-level ownership (teams own specific services)
/services/user-service/ @core-team-backend
/services/auth-service/ @core-team-backend
/services/payment-service/ @core-team-backend

/services/product-catalog-service/ @retail-team-backend
/services/cart-service/ @retail-team-backend
/services/checkout-service/ @retail-team-backend
/services/order-service/ @retail-team-backend

/services/transaction-monitor-service/ @aml-team-backend
/services/compliance-report-service/ @aml-team-backend

/services/api-gateway/ @redesign-team-backend @platform-lead

# Shared components require multi-team approval
/shared/auth-library/ @core-team-backend @retail-team-backend
/shared/payment-library/ @core-team-backend @aml-team-backend
/shared/api-contracts/ @retail-team-backend @core-team-backend @aml-team-backend @redesign-team-backend

# Kafka topics and schemas (multi-team impact)
/kafka/topics/ @platform-lead @core-team-backend @retail-team-backend
/kafka/schemas/ @platform-lead @core-team-backend @retail-team-backend

# Database migrations - requires DBA approval
**/migrations/*.sql @dba-team @platform-lead

# Infrastructure
/.github/workflows/ @devops-team @platform-lead
/k8s/ @devops-team @platform-lead
/helm/ @devops-team
</code></pre>
<p><strong>Code Review Rules:</strong></p>
<table>
<thead>
<tr>
<th><strong>Change Type</strong></th>
<th><strong>Required Approvals</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Single-team service</strong></td>
<td>1 approval from same team</td>
<td>Retail modifies cart-service ‚Üí 1 Retail dev review</td>
</tr>
<tr>
<td><strong>Cross-team service</strong></td>
<td>1 approval from each affected team</td>
<td>Core modifies user-service used by Retail ‚Üí 1 Core + 1 Retail approval</td>
</tr>
<tr>
<td><strong>Shared library</strong></td>
<td>2 approvals from different teams</td>
<td>Auth library change ‚Üí 1 Core + 1 Retail approval</td>
</tr>
<tr>
<td><strong>Kafka topic/schema</strong></td>
<td>Platform lead + 1 team lead</td>
<td>New Kafka topic ‚Üí Platform lead + affected team approval</td>
</tr>
<tr>
<td><strong>Database migration</strong></td>
<td>DBA + platform lead</td>
<td>Schema change ‚Üí DBA + platform lead approval</td>
</tr>
<tr>
<td><strong>API contract change</strong></td>
<td>All consuming teams</td>
<td>Payment API v2 ‚Üí Core + Retail + AML approval</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="api-development-standards-openapi-required">API Development Standards (OpenAPI Required)</h2>
<h3 id="technology-stack-httprest-openapi">Technology Stack: HTTP/REST + OpenAPI</h3>
<p>All inter-service communication uses <strong>HTTP/REST APIs</strong> with <strong>OpenAPI 3.0+ specifications</strong>.[2][3][1]</p>
<p><strong>Why OpenAPI for Microservices?</strong>[1]</p>
<ul>
<li><strong>Contract-First Development</strong>: Define API before implementation, teams develop in parallel</li>
<li><strong>Client Code Generation</strong>: Auto-generate Java/JavaScript/Swift client libraries</li>
<li><strong>Documentation</strong>: Auto-generate interactive docs (Swagger UI, Redoc)</li>
<li><strong>Contract Testing</strong>: Validate provider-consumer compatibility</li>
<li><strong>Breaking Change Detection</strong>: Automated tools catch incompatible changes</li>
</ul>
<h3 id="mandatory-api-versioning-for-mobile-compatibility">Mandatory API Versioning for Mobile Compatibility</h3>
<p><strong>Problem:</strong> Mobile apps (iOS/Android) require 3-14 days for App Store approval. Web deploys instantly. APIs must support multiple versions simultaneously.[22][23][24]</p>
<p><strong>Versioning Strategy: URI Path Versioning</strong></p>
<pre><code>Mobile app v2.1 (released 3 months ago, 40% users):
  ‚Üí https://api.example.com/v2/users

Mobile app v3.0 (released last week, 15% users):
  ‚Üí https://api.example.com/v3/users

Web app (deployed today):
  ‚Üí https://api.example.com/v3/users
</code></pre>
<p><strong>Semantic Versioning Rules</strong>:[25][26][27]</p>
<table>
<thead>
<tr>
<th><strong>Version Change</strong></th>
<th><strong>When to Use</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MAJOR</strong> (v2 ‚Üí v3)</td>
<td>Breaking changes, removes fields, changes types</td>
<td>Removed <code>fullName</code>, added <code>firstName</code>/<code>lastName</code></td>
</tr>
<tr>
<td><strong>MINOR</strong> (v2.1 ‚Üí v2.2)</td>
<td>Backward-compatible additions</td>
<td>Added optional <code>phoneNumber</code> field</td>
</tr>
<tr>
<td><strong>PATCH</strong> (v2.1.3 ‚Üí v2.1.4)</td>
<td>Bug fixes, performance, security (non-breaking)</td>
<td>Fixed timezone conversion bug</td>
</tr>
</tbody>
</table>
<p><strong>Version Support Policy:</strong></p>
<table>
<thead>
<tr>
<th><strong>Version</strong></th>
<th><strong>Support Duration</strong></th>
<th><strong>SLA</strong></th>
<th><strong>Deprecation Notice</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Current (v3)</strong></td>
<td>Indefinite</td>
<td>Full support, new features</td>
<td>N/A</td>
</tr>
<tr>
<td><strong>N-1 (v2)</strong></td>
<td>6 months after v3 launch</td>
<td>Bug fixes only</td>
<td>3 months advance notice</td>
</tr>
<tr>
<td><strong>N-2 (v1)</strong></td>
<td>3 months after v2 sunset</td>
<td>Security fixes only</td>
<td>6 months total notice</td>
</tr>
<tr>
<td><strong>Deprecated</strong></td>
<td>Disabled</td>
<td>Returns 410 Gone</td>
<td>9 months total notice</td>
</tr>
</tbody>
</table>
<p><strong>Deprecation Timeline Example:</strong></p>
<pre><code>Jan 2025: v3 released
  ‚úÖ v3 = Current (full support)
  ‚ö†Ô∏è v2 = N-1 (bug fixes, deprecation notice sent)
  ‚ö†Ô∏è v1 = N-2 (security only)

July 2025: v2 sunset
  ‚úÖ v3 = Current
  ‚ùå v2 = Disabled (returns 410 Gone)
  ‚ö†Ô∏è v1 = N-2 (3 months remaining)

Oct 2025: v1 sunset
  ‚úÖ v3 = Current
  ‚ùå v1 = Disabled
</code></pre>
<h3 id="definition-of-ready-dor-for-api-tasks">Definition of Ready (DoR) for API Tasks</h3>
<p>Before moving Jira ticket from <strong>Backlog ‚Üí Ready</strong>, MUST have:[28][29][30]</p>
<h4 id="openapi-3.0-specification-mandatory313233"><strong>1. OpenAPI 3.0+ Specification (Mandatory)</strong>[31][32][33]</h4>
<p>Create spec in <code>docs/openapi/{service}-{version}.yaml</code>:</p>
<pre><code class="language-yaml"># docs/openapi/user-service-v3.yaml
openapi: 3.0.0
info:
  title: User Service API
  version: 3.0.0
  description: User management and authentication
  contact:
    name: Core Team
    email: core-team@example.com

servers:
  - url: https://api.example.com/v3
    description: Production
  - url: https://api-staging.example.com/v3
    description: Staging

paths:
  /users/{userId}:
    get:
      summary: Get user by ID
      operationId: getUserById
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: Unique user identifier
      responses:
        '200':
          description: User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserV3'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  schemas:
    UserV3:
      type: object
      required:
        - userId
        - email
        - firstName
        - lastName
      properties:
        userId:
          type: integer
          format: int64
          example: 12345
        email:
          type: string
          format: email
          example: user@example.com
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: Doe
        phoneNumber:
          type: string
          example: &quot;+1234567890&quot;
          description: Optional phone number (added in v3.1)
        createdAt:
          type: string
          format: date-time
          example: &quot;2025-01-15T10:30:00Z&quot;
    
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          example: &quot;USER_NOT_FOUND&quot;
        message:
          type: string
          example: &quot;User with ID 12345 not found&quot;
        timestamp:
          type: string
          format: date-time
</code></pre>
<p><strong>Validation:</strong> Use Swagger Editor (<a href="https://editor.swagger.io">https://editor.swagger.io</a>) or Spectral CLI.[34][35]</p>
<pre><code class="language-bash"># Validate OpenAPI spec
spectral lint docs/openapi/user-service-v3.yaml
</code></pre>
<h4 id="api-versioning-decision"><strong>2. API Versioning Decision</strong></h4>
<p>Ticket must document:</p>
<pre><code class="language-markdown">## API Versioning Decision

**Change Type:** MAJOR (v2 ‚Üí v3)

**Reasoning:** Removing deprecated `fullName` field and splitting into `firstName` + `lastName`.
This is breaking because v2 mobile clients expect `fullName` in response.

**Backward Compatibility Strategy:**
- v2 remains active for 6 months (sunset: July 1, 2026)
- v3 launched January 15, 2026
- Mobile app v3.0 submitted to App Store: January 20, 2026
- Web immediately uses v3
- Email notification to API consumers: January 1, 2026

**Migration Path:**
1. Deploy v3 alongside v2 (both active)
2. Mobile apps update to v3 over 6 months
3. Monitor v2 usage in Datadog
4. When v2 usage &lt; 1%, schedule sunset
5. Disable v2 on July 1, 2026
</code></pre>
<h4 id="affected-teams-dependencies"><strong>3. Affected Teams &amp; Dependencies</strong></h4>
<pre><code class="language-markdown">## Teams Impacted

**Provider Team:** Core Team (owns user-service)

**Consumer Teams:**
- ‚úÖ **Retail Team**: Uses user-service for customer profiles in checkout
  - Services: checkout-service, cart-service
  - Impact: Must update API client to handle v3 response
  - Coordination: Retail lead notified, joint API review scheduled

- ‚úÖ **AML Team**: Uses user-service for KYC checks
  - Services: transaction-monitor-service
  - Impact: Low (only reads userId and email, both unchanged)
  - Coordination: AML lead notified via Slack

- ‚úÖ **Redesign Team**: Updating UI to display firstName/lastName separately
  - Services: Frontend web app
  - Impact: High (UI depends on new fields)
  - Coordination: Already planned, part of Redesign scope

**External Dependencies:**
- [ ] Mobile iOS app (Team 3) - Update required
- [ ] Mobile Android app (Team 3) - Update required
- [ ] Partner API integration (external) - Migration guide required
</code></pre>
<h4 id="testable-acceptance-criteria"><strong>4. Testable Acceptance Criteria</strong></h4>
<pre><code class="language-markdown">## Acceptance Criteria

**Given** a mobile client on v2.5
**When** they call GET /v2/users/123
**Then** they receive `fullName` field (backward compatible)

**Given** a mobile client on v3.0
**When** they call GET /v3/users/123  
**Then** they receive `firstName` and `lastName` fields

**Given** an API consumer calls deprecated v1 endpoint
**When** response received
**Then** response includes deprecation headers:
  - X-API-Deprecated: true
  - X-API-Sunset-Date: 2026-07-01
  - Sunset: Wed, 01 Jul 2026 00:00:00 GMT

**Given** a service-to-service call (checkout-service ‚Üí user-service)
**When** checkout-service calls user-service v3
**Then** response time &lt; 200ms (p95)
**And** circuit breaker does not trip
</code></pre>
<h4 id="security-performance-baseline"><strong>5. Security &amp; Performance Baseline</strong></h4>
<pre><code class="language-markdown">## Security Review

- [x] Reviewed by Security Team: @security-lead (Dec 1, 2025)
- [x] PII handling compliant with GDPR
- [x] Rate limiting configured: 1000 req/min per API key
- [x] Authentication: OAuth 2.0 required (unchanged from v2)
- [x] Authorization: User can only access own profile (unchanged)

## Performance SLA

- **p50 latency:** &lt; 50ms
- **p95 latency:** &lt; 200ms
- **p99 latency:** &lt; 500ms
- **Throughput:** &gt; 2000 req/sec
- **Error rate:** &lt; 0.1%
</code></pre>
<p><strong>DoR Sign-Off:</strong> Product Owner + Tech Lead approve before &quot;Ready&quot;.[29][28]</p>
<hr />
<h3 id="definition-of-done-dod-for-api-tasks">Definition of Done (DoD) for API Tasks</h3>
<p>Before moving from <strong>Testing ‚Üí Done</strong>, MUST have:[30][36][29]</p>
<h4 id="openapi-spec-published"><strong>1. OpenAPI Spec Published</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> OpenAPI spec matches actual implementation (no drift)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Spec validated with Swagger Validator or Spectral</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Spec published to API docs portal (Swagger UI at <a href="https://api-docs.example.com">https://api-docs.example.com</a>)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Spec checked into Git (<code>docs/openapi/user-service-v3.yaml</code>)</li>
</ul>
<p><strong>CI/CD Validation:</strong></p>
<pre><code class="language-yaml"># .github/workflows/api-spec-validation.yml
name: Validate OpenAPI Specs
on: [pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Validate OpenAPI 3.0 specs
        uses: char0n/swagger-editor-validate@v1
        with:
          definition-file: docs/openapi/user-service-v3.yaml
      
      - name: Lint with Spectral
        run: |
          npm install -g @stoplight/spectral-cli
          spectral lint docs/openapi/user-service-v3.yaml
      
      - name: Check for breaking changes
        uses: oasdiff/oasdiff-action@v0.0.15
        with:
          base: docs/openapi/user-service-v2.yaml
          revision: docs/openapi/user-service-v3.yaml
          fail-on-breaking: true
</code></pre>
<h4 id="api-contract-tests-pass373839"><strong>2. API Contract Tests Pass</strong>[37][38][39]</h4>
<p><strong>Consumer Contract Test (Retail Team - checkout-service):</strong></p>
<pre><code class="language-java">// Retail team defines expectation from user-service
@Pact(consumer = &quot;checkout-service&quot;, provider = &quot;user-service&quot;)
public RequestResponsePact getUserById(PactDslWithProvider builder) {
    return builder
        .given(&quot;user 12345 exists&quot;)
        .uponReceiving(&quot;request for user 12345&quot;)
            .path(&quot;/v3/users/12345&quot;)
            .method(&quot;GET&quot;)
            .headers(&quot;Authorization&quot;, &quot;Bearer token123&quot;)
        .willRespondWith()
            .status(200)
            .body(new PactDslJsonBody()
                .integerType(&quot;userId&quot;, 12345)
                .stringType(&quot;email&quot;, &quot;user@example.com&quot;)
                .stringType(&quot;firstName&quot;, &quot;John&quot;)
                .stringType(&quot;lastName&quot;, &quot;Doe&quot;)
                .stringType(&quot;phoneNumber&quot;, &quot;+1234567890&quot;)
            )
        .toPact();
}
</code></pre>
<p><strong>Provider Contract Verification (Core Team - user-service):</strong></p>
<pre><code class="language-java">// Core team verifies they satisfy Retail's contract
@PactVerification(value = &quot;checkout-service&quot;, fragment = &quot;getUserById&quot;)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)
public class UserServicePactVerificationTest {
    
    @TestTemplate
    @ExtendWith(PactVerificationInvocationContextProvider.class)
    void verifyPact(PactVerificationContext context) {
        context.verifyInteraction();
    }
    
    @BeforeEach
    void setup(PactVerificationContext context) {
        context.setTarget(new HttpTestTarget(&quot;localhost&quot;, 8080));
    }
    
    @State(&quot;user 12345 exists&quot;)
    public void userExists() {
        // Setup: Create test user in database
        userRepository.save(new User(12345, &quot;user@example.com&quot;, &quot;John&quot;, &quot;Doe&quot;));
    }
}
</code></pre>
<p><strong>Contract Tests Must Pass:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Consumer contract tests pass (checkout-service expects correct v3 response)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Provider contract tests pass (user-service satisfies checkout-service expectations)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Contracts published to Pact Broker (<a href="https://pact-broker.example.com">https://pact-broker.example.com</a>)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> All consuming teams' contracts verified</li>
</ul>
<h4 id="backward-compatibility-verified"><strong>3. Backward Compatibility Verified</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> v2 endpoints still functional (if maintaining backward compatibility)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> v2 automated tests still passing</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Manual test: Old mobile app (v2.5) against new backend</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Breaking changes documented in migration guide</li>
</ul>
<p><strong>Compatibility Test Script:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# Test backward compatibility

echo &quot;Testing v2 endpoint (old mobile app compatibility)...&quot;
curl -X GET &quot;https://api-staging.example.com/v2/users/12345&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot; | jq '.'

echo &quot;Expected: fullName field present&quot;
echo &quot;Actual: $(curl -s https://api-staging.example.com/v2/users/12345 \
  -H &quot;Authorization: Bearer $TOKEN&quot; | jq '.fullName')&quot;

echo &quot;\nTesting v3 endpoint (new apps)...&quot;
curl -X GET &quot;https://api-staging.example.com/v3/users/12345&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot; | jq '.'

echo &quot;Expected: firstName and lastName fields present&quot;
</code></pre>
<h4 id="versioning-correctly-implemented"><strong>4. Versioning Correctly Implemented</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> API version in URL matches OpenAPI spec (<code>/v3/users</code>)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Semantic version incremented correctly (v2.5.3 ‚Üí v3.0.0)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> v2 endpoints include deprecation headers</li>
</ul>
<p><strong>Deprecation Headers (v2 Response):</strong></p>
<pre><code class="language-http">HTTP/1.1 200 OK
Content-Type: application/json
X-API-Version: v2
X-API-Deprecated: true
X-API-Sunset-Date: 2026-07-01
X-API-Supported-Versions: v2, v3
Link: &lt;https://docs.example.com/api/migration/v2-to-v3&gt;; rel=&quot;deprecation&quot;
Sunset: Wed, 01 Jul 2026 00:00:00 GMT

{
  &quot;userId&quot;: 12345,
  &quot;email&quot;: &quot;user@example.com&quot;,
  &quot;fullName&quot;: &quot;John Doe&quot;
}
</code></pre>
<h4 id="documentation-complete"><strong>5. Documentation Complete</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Changelog</strong> updated (<code>CHANGELOG.md</code>)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Migration guide</strong> published (Confluence)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> <strong>API reference</strong> generated from OpenAPI spec (Swagger UI)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Slack announcement</strong> posted to <code>#api-updates</code></li>
</ul>
<p><strong>Example Changelog:</strong></p>
<pre><code class="language-markdown"># User Service API Changelog

## v3.0.0 - 2026-01-15 (BREAKING CHANGE)

### Breaking Changes
- ‚ùå Removed `fullName` field from User model
- ‚úÖ Added `firstName` and `lastName` fields to User model

### Migration Guide

**Before (v2):**
</code></pre>
<p>{
&quot;userId&quot;: 12345,
&quot;email&quot;: &quot;user@example.com&quot;,
&quot;fullName&quot;: &quot;John Doe&quot;
}</p>
<pre><code>
**After (v3):**
</code></pre>
<p>{
&quot;userId&quot;: 12345,
&quot;email&quot;: &quot;user@example.com&quot;,
&quot;firstName&quot;: &quot;John&quot;,
&quot;lastName&quot;: &quot;Doe&quot;,
&quot;phoneNumber&quot;: &quot;+1234567890&quot;
}</p>
<pre><code>
**Client Update Required:**
</code></pre>
<p>// OLD (v2)
const userName = response.data.fullName;</p>
<p>// NEW (v3)
const userName = <code>${response.data.firstName} ${response.data.lastName}</code>;</p>
<pre><code>
**Timeline:**
- v3 launch: 2026-01-15
- v2 deprecation notice: 2026-01-15
- v2 sunset: 2026-07-01 (6 months)

**Support:**
- Mobile iOS v3.0: Submitted 2026-01-20, approved 2026-01-27
- Mobile Android v3.0: Submitted 2026-01-20, approved 2026-01-25
- Web: Immediately uses v3
</code></pre>
<h4 id="mobile-app-compatibility-tested"><strong>6. Mobile App Compatibility Tested</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Tested with production mobile app version (v2.5 - iOS/Android)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Tested with beta mobile app version (v3.0 - iOS/Android)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Confirmed old mobile apps still work (v2 endpoint)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Mobile team notified of v3 availability</li>
</ul>
<p><strong>Mobile Compatibility Matrix:</strong></p>
<table>
<thead>
<tr>
<th><strong>Platform</strong></th>
<th><strong>App Version</strong></th>
<th><strong>API Version</strong></th>
<th><strong>Status</strong></th>
<th><strong>Notes</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>iOS</td>
<td>v2.5 (current)</td>
<td>v2</td>
<td>‚úÖ Works</td>
<td>Uses <code>/v2/users</code>, receives <code>fullName</code></td>
</tr>
<tr>
<td>iOS</td>
<td>v3.0 (beta)</td>
<td>v3</td>
<td>‚úÖ Works</td>
<td>Uses <code>/v3/users</code>, receives <code>firstName</code>/<code>lastName</code></td>
</tr>
<tr>
<td>Android</td>
<td>v2.5 (current)</td>
<td>v2</td>
<td>‚úÖ Works</td>
<td>Uses <code>/v2/users</code>, receives <code>fullName</code></td>
</tr>
<tr>
<td>Android</td>
<td>v3.0 (beta)</td>
<td>v3</td>
<td>‚úÖ Works</td>
<td>Uses <code>/v3/users</code>, receives <code>firstName</code>/<code>lastName</code></td>
</tr>
<tr>
<td>Web</td>
<td>Latest</td>
<td>v3</td>
<td>‚úÖ Works</td>
<td>Always uses latest API version</td>
</tr>
</tbody>
</table>
<h4 id="deployment-complete"><strong>7. Deployment Complete</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Deployed to DEV (auto-deploy on merge)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Deployed to QA (manual promotion)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Deployed to Staging (manual promotion + stakeholder approval)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Deployed to Production (manual promotion + release checklist)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> API Gateway routing configured for v3</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Health check endpoint responding (GET <code>/v3/health</code>)</li>
</ul>
<h4 id="monitoring-alerts-configured"><strong>8. Monitoring &amp; Alerts Configured</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><p><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Datadog dashboard</strong> shows v3 endpoint metrics:</p>
<ul>
<li>Request rate (per endpoint)</li>
<li>P50, P95, P99 latency</li>
<li>Error rate (4xx, 5xx)</li>
<li>Version usage (v2 vs v3 traffic split)</li>
</ul>
</li>
<li class="task-list-item"><p><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Alerts configured:</strong></p>
<ul>
<li>Error rate &gt; 5% for 5 minutes ‚Üí Slack <code>#core-team-alerts</code></li>
<li>P95 latency &gt; 500ms for 5 minutes ‚Üí Slack <code>#core-team-alerts</code></li>
<li>v2 usage increase (possible mobile app update failure) ‚Üí Slack <code>#api-updates</code></li>
</ul>
</li>
</ul>
<p><strong>Datadog Query Examples:</strong></p>
<pre><code># Track v2 vs v3 usage
sum:http.requests{service:user-service,api_version:v2}
sum:http.requests{service:user-service,api_version:v3}

# Alert on high error rate
avg(last_5m):sum:http.requests{service:user-service,api_version:v3,status:5xx}
  / sum:http.requests{service:user-service,api_version:v3} * 100 &gt; 5
</code></pre>
<h4 id="stakeholder-notification"><strong>9. Stakeholder Notification</strong></h4>
<ul class="contains-task-list">
<li class="task-list-item"><p><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Email sent</strong> to api-consumers@example.com:</p>
<ul>
<li>New v3 available</li>
<li>Changes summary</li>
<li>Migration guide link</li>
<li>v2 deprecation timeline</li>
</ul>
</li>
<li class="task-list-item"><p><input disabled="disabled" type="checkbox" checked="checked" /> <strong>Slack announcement</strong> posted to <code>#api-updates</code>:</p>
</li>
</ul>
<pre><code class="language-markdown">üöÄ **New API Version Released: User Service v3.0.0**

**Released:** 2026-01-15 14:30 UTC  
**Team:** Core Team

**What's New:**
‚Ä¢ ‚ú® User names split into `firstName` and `lastName` for better flexibility
‚Ä¢ ‚ú® Added optional `phoneNumber` field
‚Ä¢ ‚ö†Ô∏è Removed deprecated `fullName` field (use `firstName` + `lastName`)

**Breaking Changes:**
‚ö†Ô∏è This is a MAJOR version bump (v2 ‚Üí v3)

**Migration Required:**
- Web app: Already updated ‚úÖ
- Mobile iOS v3.0: Submitted to App Store (approval ~7 days)
- Mobile Android v3.0: Submitted to Play Store (approval ~3 days)

**Backward Compatibility:**
‚úÖ v2 remains active for 6 months (sunset: July 1, 2026)
‚úÖ Old mobile apps will continue working

**Documentation:**
üìñ API Docs: https://api-docs.example.com/user-service/v3
üìñ Migration Guide: https://docs.example.com/api/migration/v2-to-v3
üìñ OpenAPI Spec: https://github.com/company/api-specs/blob/main/user-service-v3.yaml

**Questions?** Reply in thread or DM @core-team-lead
</code></pre>
<p><strong>DoD Sign-Off:</strong> QA Lead + Release Manager approve before &quot;Done&quot;.[36][29]</p>
<hr />
<h2 id="kafka-event-driven-communication">Kafka &amp; Event-Driven Communication</h2>
<h3 id="technology-stack-apache-kafka-kafka-streams">Technology Stack: Apache Kafka + Kafka Streams</h3>
<p><strong>Kafka Use Cases in Your Platform</strong>:[5][40][4][6]</p>
<ol>
<li><strong>Asynchronous Inter-Service Communication</strong>: Decoupled event-driven messaging</li>
<li><strong>Event Sourcing</strong>: Store state changes as immutable event log</li>
<li><strong>Real-Time Stream Processing</strong>: Transform, aggregate, enrich data with Kafka Streams</li>
<li><strong>Data Integration</strong>: Sync data across microservices without tight coupling</li>
</ol>
<h3 id="communication-patterns">Communication Patterns</h3>
<p><strong>HTTP/REST APIs</strong> (Synchronous):[3][5]</p>
<pre><code>checkout-service ‚Üí (HTTP POST) ‚Üí payment-service ‚Üí (HTTP response)
</code></pre>
<p><strong>Use for:</strong> Request-response, real-time queries, low-latency requirements</p>
<p><strong>Apache Kafka</strong> (Asynchronous):[4][5][6]</p>
<pre><code>order-service ‚Üí (Kafka event: OrderCreated) ‚Üí [order-events topic]
  ‚Üì
  ‚Üí notification-service (sends confirmation email)
  ‚Üí inventory-service (reserves stock)
  ‚Üí analytics-service (tracks revenue)
</code></pre>
<p><strong>Use for:</strong> Fire-and-forget, fan-out to multiple consumers, event logging, audit trails</p>
<h3 id="kafka-topic-naming-convention">Kafka Topic Naming Convention</h3>
<p><strong>Format:</strong> <code>{domain}.{entity}.{event-type}</code></p>
<pre><code># Retail Team topics
retail.order.created
retail.order.updated
retail.order.cancelled
retail.cart.abandoned
retail.product.viewed

# Core Team topics
core.user.registered
core.user.updated
core.payment.initiated
core.payment.completed
core.payment.failed

# AML Team topics
aml.transaction.flagged
aml.transaction.reviewed
aml.risk-assessment.completed

# Cross-team topics
system.deployment.started
system.deployment.completed
system.incident.created
</code></pre>
<h3 id="kafka-schema-management-avro">Kafka Schema Management (Avro)</h3>
<p><strong>Why Schemas?</strong>[40][6]</p>
<ul>
<li>Enforce data contracts between producers and consumers</li>
<li>Prevent breaking changes (schema evolution)</li>
<li>Enable backward/forward compatibility</li>
</ul>
<p><strong>Example Avro Schema (<code>order-created-v1.avsc</code>):</strong></p>
<pre><code class="language-json">{
  &quot;type&quot;: &quot;record&quot;,
  &quot;namespace&quot;: &quot;com.example.retail.events&quot;,
  &quot;name&quot;: &quot;OrderCreated&quot;,
  &quot;version&quot;: 1,
  &quot;fields&quot;: [
    {
      &quot;name&quot;: &quot;orderId&quot;,
      &quot;type&quot;: &quot;string&quot;,
      &quot;doc&quot;: &quot;Unique order identifier&quot;
    },
    {
      &quot;name&quot;: &quot;userId&quot;,
      &quot;type&quot;: &quot;long&quot;,
      &quot;doc&quot;: &quot;User who placed the order&quot;
    },
    {
      &quot;name&quot;: &quot;totalAmount&quot;,
      &quot;type&quot;: &quot;double&quot;,
      &quot;doc&quot;: &quot;Order total in USD&quot;
    },
    {
      &quot;name&quot;: &quot;createdAt&quot;,
      &quot;type&quot;: &quot;long&quot;,
      &quot;logicalType&quot;: &quot;timestamp-millis&quot;,
      &quot;doc&quot;: &quot;Order creation timestamp&quot;
    },
    {
      &quot;name&quot;: &quot;items&quot;,
      &quot;type&quot;: {
        &quot;type&quot;: &quot;array&quot;,
        &quot;items&quot;: {
          &quot;type&quot;: &quot;record&quot;,
          &quot;name&quot;: &quot;OrderItem&quot;,
          &quot;fields&quot;: [
            {&quot;name&quot;: &quot;productId&quot;, &quot;type&quot;: &quot;string&quot;},
            {&quot;name&quot;: &quot;quantity&quot;, &quot;type&quot;: &quot;int&quot;},
            {&quot;name&quot;: &quot;price&quot;, &quot;type&quot;: &quot;double&quot;}
          ]
        }
      }
    }
  ]
}
</code></pre>
<p><strong>Schema Registry:</strong> Store schemas in Confluent Schema Registry or Apicurio Registry.</p>
<h3 id="kafka-streams-for-real-time-processing">Kafka Streams for Real-Time Processing</h3>
<p><strong>Use Case: AML Team - Real-Time Transaction Monitoring</strong>[7][6]</p>
<pre><code class="language-java">// Kafka Streams topology for transaction monitoring
@Configuration
public class TransactionMonitoringStream {
    
    @Bean
    public KStream&lt;String, Transaction&gt; transactionStream(StreamsBuilder builder) {
        
        // 1. Read from transaction topic
        KStream&lt;String, Transaction&gt; transactions = builder
            .stream(&quot;core.payment.completed&quot;,
                Consumed.with(Serdes.String(), transactionSerde()));
        
        // 2. Filter high-value transactions (&gt; $10,000)
        KStream&lt;String, Transaction&gt; highValueTx = transactions
            .filter((key, tx) -&gt; tx.getAmount() &gt; 10000);
        
        // 3. Aggregate by user (5-minute window)
        KTable&lt;Windowed&lt;String&gt;, Double&gt; userSpending = highValueTx
            .groupBy((key, tx) -&gt; tx.getUserId())
            .windowedBy(TimeWindows.of(Duration.ofMinutes(5)))
            .aggregate(
                () -&gt; 0.0,
                (userId, tx, total) -&gt; total + tx.getAmount(),
                Materialized.with(Serdes.String(), Serdes.Double())
            );
        
        // 4. Flag suspicious activity (&gt; $50,000 in 5 min)
        userSpending
            .toStream()
            .filter((windowedUser, totalSpent) -&gt; totalSpent &gt; 50000)
            .mapValues((windowedUser, totalSpent) -&gt; 
                new RiskAlert(windowedUser.key(), totalSpent, RiskLevel.HIGH))
            .to(&quot;aml.transaction.flagged&quot;,
                Produced.with(WindowedSerdes.timeWindowedSerdeFrom(String.class),
                    riskAlertSerde()));
        
        return transactions;
    }
}
</code></pre>
<p><strong>Result:</strong> AML team detects high-risk activity in real-time without polling database.</p>
<h3 id="kafka-topic-codeowners">Kafka Topic CODEOWNERS</h3>
<p>Add to <code>.github/CODEOWNERS</code>:</p>
<pre><code class="language-plaintext"># Kafka topics and schemas require multi-team approval
/kafka/topics/retail.* @retail-team-backend
/kafka/topics/core.* @core-team-backend
/kafka/topics/aml.* @aml-team-backend
/kafka/topics/system.* @platform-lead

# Cross-team topics (multiple consumers)
/kafka/topics/core.payment.* @core-team-backend @aml-team-backend
/kafka/topics/retail.order.* @retail-team-backend @core-team-backend

# Schema changes require schema registry admin approval
/kafka/schemas/ @platform-lead @schema-admin
</code></pre>
<h3 id="kafka-event-notification-in-slack">Kafka Event Notification in Slack</h3>
<p><strong>When new Kafka topic created or schema updated:</strong></p>
<pre><code class="language-markdown">üì° **Kafka Topic Created: retail.order.created**

**Created by:** Retail Team (@retail-team-lead)  
**Date:** 2026-01-15 10:30 UTC

**Topic Details:**
- **Partitions:** 6
- **Replication Factor:** 3
- **Retention:** 7 days
- **Cleanup Policy:** delete

**Schema Version:** v1  
**Schema Registry:** https://schema-registry.example.com/subjects/retail.order.created-value/versions/1

**Consumers (Expected):**
- notification-service (Redesign Team) - sends order confirmation emails
- inventory-service (Retail Team) - reserves stock
- analytics-service (AML Team) - tracks revenue metrics

**Producer:**
- order-service (Retail Team)

**Event Rate (Expected):** ~500 events/sec during peak hours

**Documentation:** https://docs.example.com/kafka/topics/retail.order.created

**Questions?** Reply in thread or contact @retail-team-lead
</code></pre>
<hr />
<h2 id="deployment-process-overview">Deployment Process Overview</h2>
<h3 id="current-problems-solutions">Current Problems &amp; Solutions</h3>
<table>
<thead>
<tr>
<th><strong>Problem</strong></th>
<th><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Manual deployments bypass QA</td>
<td>Automated CI/CD with mandatory quality gates</td>
</tr>
<tr>
<td>No release visibility</td>
<td>Slack notifications with metadata (branch, commit, version, team)</td>
</tr>
<tr>
<td>Lost deployment context</td>
<td>Release notes auto-generated from Jira</td>
</tr>
<tr>
<td>Single person knows process</td>
<td>Complete documentation + video walkthroughs</td>
</tr>
<tr>
<td>Concurrent team conflicts</td>
<td>Service locks + merge queue + daily standups</td>
</tr>
<tr>
<td>API breaking changes undetected</td>
<td>OpenAPI spec validation + contract tests in CI/CD</td>
</tr>
<tr>
<td>Kafka schema drift</td>
<td>Schema Registry validation + compatibility checks</td>
</tr>
</tbody>
</table>
<h3 id="deployment-stages">Deployment Stages</h3>
<pre><code>Feature Branch (team-specific naming)
    ‚Üì
Pull Request (CODEOWNERS approval required)
    ‚Üì
CI Pipeline:
  - Build Docker image
  - Unit tests (&gt;80% coverage)
  - OpenAPI spec validation (if API changes)
  - Kafka schema validation (if event changes)
  - Contract tests (Pact)
  - SonarQube code quality
  - Security scan (Snyk, OWASP)
    ‚Üì
Merge to Main (after approvals + CI passes)
    ‚Üì
CD Pipeline:
  - Auto-deploy to DEV
  - Integration tests
  - Smoke tests
    ‚Üì
Manual Promotion to QA (Definition of Ready checklist)
    ‚Üì
QA Testing:
  - Regression tests
  - Exploratory testing
  - Performance tests
  - Mobile compatibility tests (if API changes)
    ‚Üì
Manual Promotion to Staging (Release Manager approval)
    ‚Üì
Staging Validation:
  - Final smoke tests
  - Canary deployment test
  - Load testing
    ‚Üì
Production Deployment (Release Checklist + Change Advisory Board)
    ‚Üì
Blue-Green Deployment with Canary:
  - 10% traffic ‚Üí new version (5 min monitoring)
  - 50% traffic ‚Üí new version (10 min monitoring)
  - 100% traffic ‚Üí new version
    ‚Üì
Health Checks &amp; Monitoring
    ‚Üì
Slack Notification (team, version, API changes, Kafka topics)
    ‚Üì
Release Notes Generated (Jira ‚Üí Confluence)
</code></pre>
<hr />
<h2 id="git-branching-strategy--feature-stand-deployment">Git Branching Strategy &amp; Feature Stand Deployment</h2>
<h3 id="overview">Overview</h3>
<p>This section defines the git branching strategy and feature stand deployment process for managing parallel development across four cross-functional teams (Retail, Core, AML, Redesign). The strategy enables teams to work independently while maintaining code quality and enabling parallel QA and release processes.</p>
<h3 id="branch-structure">Branch Structure</h3>
<h4 id="visual-git-branch-hierarchy">Visual Git Branch Hierarchy</h4>
<div class="mermaid">
gitgraph
    commit id: "Initial"
    branch main
    checkout main
    commit id: "Production"
    branch dev
    checkout dev
    commit id: "Integration"
    branch feature/CORE-100
    checkout feature/CORE-100
    commit id: "Core Team Work"
    checkout dev
    branch feature/RETAIL-250
    checkout feature/RETAIL-250
    commit id: "Retail Team Work"
    checkout dev
    branch feature/AML-75
    checkout feature/AML-75
    commit id: "AML Team Work"
    checkout dev
    branch feature/REDESIGN-42
    checkout feature/REDESIGN-42
    commit id: "Redesign Team Work"
    checkout dev
    merge feature/CORE-100
    commit id: "Integrated CORE-100"
    merge feature/RETAIL-250
    commit id: "Integrated RETAIL-250"
    checkout main
    merge dev
    commit id: "Release to Production"
</div>
<h4 id="core-branches">Core Branches</h4>
<pre><code>main (or master)
‚îú‚îÄ‚îÄ Production-ready code only
‚îú‚îÄ‚îÄ Protected branch (requires PR + approvals)
‚îî‚îÄ‚îÄ Auto-deploys to Production after staging validation

dev
‚îú‚îÄ‚îÄ Integration branch for all teams
‚îú‚îÄ‚îÄ All feature branches merge here first
‚îú‚îÄ‚îÄ Auto-deploys to DEV environment
‚îî‚îÄ‚îÄ Used for daily integration testing
</code></pre>
<h4 id="feature-branches">Feature Branches</h4>
<p><strong>Naming Convention:</strong> <code>feature/{TEAM-PREFIX}-{TICKET-NUMBER}-{short-description}</code></p>
<p><strong>Team Prefixes:</strong></p>
<ul>
<li><strong>CORE</strong>: Core Team (authentication, payments, user management)</li>
<li><strong>RETAIL</strong>: Retail Team (customer-facing features, checkout, catalog)</li>
<li><strong>AML</strong>: AML Team (anti-money laundering, compliance)</li>
<li><strong>REDESIGN</strong>: Redesign Team (UI modernization, frontend integration)</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code>feature/CORE-100-implement-oauth2
feature/RETAIL-250-add-product-search
feature/AML-75-enhance-kyc-checks
feature/REDESIGN-42-update-checkout-ui
</code></pre>
<p><strong>Branch Lifecycle:</strong></p>
<ol>
<li>Created from <code>dev</code> branch</li>
<li>Developer works on feature</li>
<li>PR created to <code>dev</code> (for integration) or <code>main</code> (for direct production path)</li>
<li>After merge, branch can be deleted (or kept for feature stand deployment)</li>
</ol>
<h3 id="feature-stand-deployment-process">Feature Stand Deployment Process</h3>
<h4 id="concept">Concept</h4>
<p>A <strong>feature stand</strong> is a fully functional, isolated environment created on-demand for testing cross-service features. When a developer deploys their feature branch to a feature stand, the infrastructure automatically:</p>
<ol>
<li>Creates a complete environment with all microservices</li>
<li>Deploys each service from <code>dev</code> branch by default</li>
<li><strong>Overrides</strong> to deploy from the feature branch if that branch exists in the service's repository</li>
<li>Provides a unique URL for QA testing</li>
</ol>
<h4 id="visual-feature-stand-deployment-flow">Visual Feature Stand Deployment Flow</h4>
<div class="mermaid">
flowchart TD
    A[Developer creates feature branch<br/>feature/CORE-100-oauth2] --> B[Push to GitLab]
    B --> C[Click 'Deploy to Feature Stand'<br/>in GitLab UI]
    C --> D[Infrastructure Automation<br/>Detects: CORE-100]
    D --> E{Scan All Service Repos<br/>for branch: feature/CORE-100-*}
    E --> F1[user-service<br/>Branch found?]
    E --> F2[auth-service<br/>Branch found?]
    E --> F3[payment-service<br/>Branch found?]
    E --> F4[product-service<br/>Branch found?]
    E --> F5[Other services...]
    
    F1 -->|Yes| G1[Deploy from<br/>feature/CORE-100-*]
    F1 -->|No| H1[Deploy from<br/>dev branch]
    
    F2 -->|Yes| G2[Deploy from<br/>feature/CORE-100-*]
    F2 -->|No| H2[Deploy from<br/>dev branch]
    
    F3 -->|Yes| G3[Deploy from<br/>feature/CORE-100-*]
    F3 -->|No| H3[Deploy from<br/>dev branch]
    
    F4 -->|Yes| G4[Deploy from<br/>feature/CORE-100-*]
    F4 -->|No| H4[Deploy from<br/>dev branch]
    
    F5 --> H5[Deploy from<br/>dev branch]
    
    G1 --> I[Create Kubernetes Namespace<br/>feature-stand-core-100]
    G2 --> I
    G3 --> I
    G4 --> I
    H1 --> I
    H2 --> I
    H3 --> I
    H4 --> I
    H5 --> I
    
    I --> J[Configure Service Discovery<br/>Databases, Kafka Topics]
    J --> K[Generate Feature Stand URL<br/>https://feature-stand-core-100.example.com]
    K --> L[Notify QA Team<br/>with deployment details]
    L --> M[QA Testing on Feature Stand]
    M --> N{QA Approved?}
    N -->|Yes| O[Move to Code Review]
    N -->|No| P[Developer fixes issues]
    P --> B
    O --> Q[PR Created/Updated]
    Q --> R[Code Review]
    R --> S[Merge to dev/main]
</div>
<h4 id="workflow">Workflow</h4>
<pre><code>Developer completes feature work
    ‚Üì
Developer creates feature branch: feature/CORE-100-oauth2
    ‚Üì
Developer pushes branch to GitLab
    ‚Üì
Developer clicks "Deploy to Feature Stand" in GitLab UI
    ‚Üì
Infrastructure Automation:
  - Detects feature branch name: CORE-100
  - Scans all service repositories for branch: feature/CORE-100-*
  - Creates Kubernetes namespace: feature-stand-core-100
  - For each service:
    ‚îú‚îÄ‚îÄ If branch exists: feature/CORE-100-* ‚Üí deploy from that branch
    ‚îî‚îÄ‚îÄ If branch doesn't exist: deploy from dev branch
  - Configures service discovery, databases, Kafka topics
  - Generates unique URL: https://feature-stand-core-100.example.com
    ‚Üì
Feature Stand Ready
    ‚Üì
QA Team receives notification with:
  - Feature stand URL
  - List of services deployed from feature branch
  - List of services deployed from dev branch
  - Branch names and commit SHAs
    ‚Üì
QA performs testing on feature stand
    ‚Üì
After QA approval ‚Üí Move to Code Review
    ‚Üì
PR created/updated ‚Üí Code Review ‚Üí Merge to dev/main
</code></pre>
<h3 id="parallel-development-workflow">Parallel Development Workflow</h3>
<h4 id="visual-parallel-development-scenario">Visual Parallel Development Scenario</h4>
<div class="mermaid">
graph TB
    subgraph "Repository: user-service"
        US_DEV[dev branch]
        US_CORE[feature/CORE-100-oauth2<br/>Core Team]
        US_RETAIL[feature/RETAIL-250-product-search<br/>Retail Team]
    end
    
    subgraph "Repository: order-service"
        OS_DEV[dev branch]
        OS_CORE[feature/CORE-100-oauth2<br/>Core Team]
        OS_RETAIL[feature/RETAIL-250-product-search<br/>Retail Team]
    end
    
    subgraph "Feature Stand: CORE-100"
        FS_CORE[feature-stand-core-100<br/>Kubernetes Namespace]
        FS_CORE_US[user-service<br/>from feature/CORE-100-oauth2 ‚úÖ]
        FS_CORE_OS[order-service<br/>from feature/CORE-100-oauth2 ‚úÖ]
        FS_CORE_OTHER[Other services<br/>from dev branch]
        FS_CORE_URL[URL: feature-stand-core-100.example.com]
    end
    
    subgraph "Feature Stand: RETAIL-250"
        FS_RETAIL[feature-stand-retail-250<br/>Kubernetes Namespace]
        FS_RETAIL_US[user-service<br/>from feature/RETAIL-250-product-search ‚úÖ]
        FS_RETAIL_OS[order-service<br/>from feature/RETAIL-250-product-search ‚úÖ]
        FS_RETAIL_OTHER[Other services<br/>from dev branch]
        FS_RETAIL_URL[URL: feature-stand-retail-250.example.com]
    end
    
    subgraph "QA Teams"
        QA_CORE[Core Team QA<br/>Testing CORE-100]
        QA_RETAIL[Retail Team QA<br/>Testing RETAIL-250]
    end
    
    US_CORE --> FS_CORE_US
    OS_CORE --> FS_CORE_OS
    US_DEV --> FS_CORE_OTHER
    OS_DEV --> FS_CORE_OTHER
    
    US_RETAIL --> FS_RETAIL_US
    OS_RETAIL --> FS_RETAIL_OS
    US_DEV --> FS_RETAIL_OTHER
    OS_DEV --> FS_RETAIL_OTHER
    
    FS_CORE_US --> FS_CORE
    FS_CORE_OS --> FS_CORE
    FS_CORE_OTHER --> FS_CORE
    FS_CORE --> FS_CORE_URL
    FS_CORE_URL --> QA_CORE
    
    FS_RETAIL_US --> FS_RETAIL
    FS_RETAIL_OS --> FS_RETAIL
    FS_RETAIL_OTHER --> FS_RETAIL
    FS_RETAIL --> FS_RETAIL_URL
    FS_RETAIL_URL --> QA_RETAIL
</div>
<h4 id="scenario-multiple-teams-working-on-related-features">Scenario: Multiple Teams Working on Related Features</h4>
<p><strong>Example:</strong> Core Team (CORE-100) and Retail Team (RETAIL-250) both modify <code>user-service</code> and <code>order-service</code>.</p>
<p><strong>Branch State:</strong></p>
<pre><code>user-service repository:
  ‚îú‚îÄ‚îÄ dev (integration branch)
  ‚îú‚îÄ‚îÄ feature/CORE-100-oauth2 (Core Team)
  ‚îî‚îÄ‚îÄ feature/RETAIL-250-product-search (Retail Team)

order-service repository:
  ‚îú‚îÄ‚îÄ dev
  ‚îú‚îÄ‚îÄ feature/CORE-100-oauth2 (Core Team)
  ‚îî‚îÄ‚îÄ feature/RETAIL-250-product-search (Retail Team)
</code></pre>
<p><strong>Feature Stand Deployment:</strong></p>
<ol>
<li><strong>Core Team deploys CORE-100 feature stand:</strong>
<ul>
<li><code>user-service</code>: Deployed from <code>feature/CORE-100-oauth2</code> ‚úÖ</li>
<li><code>order-service</code>: Deployed from <code>feature/CORE-100-oauth2</code> ‚úÖ</li>
<li>All other services: Deployed from <code>dev</code> branch</li>
</ul>
</li>
<li><strong>Retail Team deploys RETAIL-250 feature stand:</strong>
<ul>
<li><code>user-service</code>: Deployed from <code>feature/RETAIL-250-product-search</code> ‚úÖ</li>
<li><code>order-service</code>: Deployed from <code>feature/RETAIL-250-product-search</code> ‚úÖ</li>
<li>All other services: Deployed from <code>dev</code> branch</li>
</ul>
</li>
<li><strong>Both feature stands run in parallel:</strong>
<ul>
<li><code>https://feature-stand-core-100.example.com</code> (Core Team QA)</li>
<li><code>https://feature-stand-retail-250.example.com</code> (Retail Team QA)</li>
</ul>
</li>
<li><strong>No conflicts:</strong> Each team tests independently on their isolated environment.</li>
</ol>
<h3 id="best-practices">Best Practices</h3>
<h4 id="branch-management">Branch Management</h4>
<ol>
<li><strong>Always create feature branches from <code>dev</code>:</strong>
<pre><code class="language-bash">git checkout dev
git pull origin dev
git checkout -b feature/CORE-100-oauth2
</code></pre>
</li>
<li><strong>Keep feature branches short-lived:</strong>
<ul>
<li>Merge to <code>dev</code> within 1-2 weeks</li>
<li>Delete branch after merge (unless needed for feature stand)</li>
</ul>
</li>
<li><strong>Regularly sync with <code>dev</code>:</strong>
<pre><code class="language-bash">git checkout feature/CORE-100-oauth2
git merge dev  # or git rebase dev
</code></pre>
</li>
<li><strong>Use descriptive branch names:</strong>
<ul>
<li>‚úÖ Good: <code>feature/CORE-100-implement-oauth2</code></li>
<li>‚ùå Bad: <code>feature/oauth2</code> (missing team prefix and ticket)</li>
</ul>
</li>
</ol>
<h4 id="feature-stand-management">Feature Stand Management</h4>
<ol>
<li><strong>Clean up feature stands after QA:</strong>
<ul>
<li>Feature stands consume resources</li>
<li>Delete namespace after feature is merged to <code>dev</code> or <code>main</code></li>
<li>Automate cleanup: Delete feature stands older than 7 days</li>
</ul>
</li>
<li><strong>Document feature stand dependencies:</strong>
<ul>
<li>If feature requires specific service versions, document in PR description</li>
<li>Use feature stand for integration testing, not unit testing</li>
</ul>
</li>
<li><strong>Coordinate feature stand usage:</strong>
<ul>
<li>Limit concurrent feature stands per team (e.g., max 2 per team)</li>
<li>Use feature stands for cross-service features, not single-service changes</li>
</ul>
</li>
</ol>
<h4 id="parallel-release-management">Parallel Release Management</h4>
<ol>
<li><strong>Team Independence:</strong>
<ul>
<li>Each team can release independently</li>
<li>Features merged to <code>dev</code> are automatically deployed to DEV environment</li>
<li>Teams coordinate releases through daily standups</li>
</ul>
</li>
<li><strong>Release Coordination:</strong>
<ul>
<li>Use <code>dev</code> branch for integration testing</li>
<li>Use feature stands for isolated feature testing</li>
<li>Coordinate production releases through Release Manager</li>
</ul>
</li>
<li><strong>Conflict Resolution:</strong>
<ul>
<li>If two teams modify the same service, merge conflicts resolved in <code>dev</code> branch</li>
<li>Use feature stands to test conflicting changes in isolation first</li>
<li>Daily standups to identify potential conflicts early</li>
</ul>
</li>
</ol>
<h3 id="complete-git-workflow-diagram">Complete Git Workflow Diagram</h3>
<div class="mermaid">
flowchart TD
    subgraph "Production"
        MAIN[main branch<br/>Production-ready code]
    end
    
    subgraph "Integration"
        DEV[dev branch<br/>Integration & Testing]
    end
    
    subgraph "Feature Branches"
        CORE[feature/CORE-100-oauth2<br/>Core Team]
        RETAIL[feature/RETAIL-250-product-search<br/>Retail Team]
        AML[feature/AML-75-kyc-checks<br/>AML Team]
        REDESIGN[feature/REDESIGN-42-checkout-ui<br/>Redesign Team]
    end
    
    subgraph "Feature Stands"
        FS_CORE[Feature Stand: CORE-100<br/>feature-stand-core-100.example.com]
        FS_RETAIL[Feature Stand: RETAIL-250<br/>feature-stand-retail-250.example.com]
        FS_AML[Feature Stand: AML-75<br/>feature-stand-aml-75.example.com]
        FS_REDESIGN[Feature Stand: REDESIGN-42<br/>feature-stand-redesign-42.example.com]
    end
    
    subgraph "QA Testing"
        QA_CORE[QA: Core Team]
        QA_RETAIL[QA: Retail Team]
        QA_AML[QA: AML Team]
        QA_REDESIGN[QA: Redesign Team]
    end
    
    subgraph "Code Review"
        CR_CORE[Code Review: CORE-100]
        CR_RETAIL[Code Review: RETAIL-250]
        CR_AML[Code Review: AML-75]
        CR_REDESIGN[Code Review: REDESIGN-42]
    end
    
    subgraph "Environments"
        ENV_DEV[DEV Environment<br/>Auto-deploy from dev]
        ENV_QA[QA Environment<br/>Manual promotion]
        ENV_STAGING[Staging Environment<br/>Release Manager approval]
        ENV_PROD[Production Environment<br/>After staging validation]
    end
    
    CORE -->|Deploy| FS_CORE
    RETAIL -->|Deploy| FS_RETAIL
    AML -->|Deploy| FS_AML
    REDESIGN -->|Deploy| FS_REDESIGN
    
    FS_CORE --> QA_CORE
    FS_RETAIL --> QA_RETAIL
    FS_AML --> QA_AML
    FS_REDESIGN --> QA_REDESIGN
    
    QA_CORE -->|Approved| CR_CORE
    QA_RETAIL -->|Approved| CR_RETAIL
    QA_AML -->|Approved| CR_AML
    QA_REDESIGN -->|Approved| CR_REDESIGN
    
    CR_CORE -->|Merge| DEV
    CR_RETAIL -->|Merge| DEV
    CR_AML -->|Merge| DEV
    CR_REDESIGN -->|Merge| DEV
    
    DEV -->|Auto-deploy| ENV_DEV
    ENV_DEV -->|Manual promotion| ENV_QA
    ENV_QA -->|Release Manager approval| ENV_STAGING
    ENV_STAGING -->|After validation| ENV_PROD
    ENV_PROD --> MAIN
</div>
<h4 id="text-based-workflow-summary">Text-Based Workflow Summary</h4>
<pre><code>                    main (Production)
                       ‚Üë
                       ‚îÇ (After QA + Code Review)
                       ‚îÇ
                    dev (Integration)
                 ‚Üô  ‚Üì  ‚Üò  ‚Üô  ‚Üì  ‚Üò
        feature/   feature/   feature/   feature/
        CORE-100   RETAIL-250  AML-75    REDESIGN-42
           ‚Üì           ‚Üì          ‚Üì           ‚Üì
    [Feature Stand] [Feature Stand] [Feature Stand] [Feature Stand]
           ‚Üì           ‚Üì          ‚Üì           ‚Üì
         QA          QA         QA          QA
           ‚Üì           ‚Üì          ‚Üì           ‚Üì
      Code Review  Code Review Code Review Code Review
           ‚Üì           ‚Üì          ‚Üì           ‚Üì
        Merge to dev (parallel, independent)
</code></pre>
<h3 id="summary">Summary</h3>
<p>This git branching strategy enables:</p>
<p>‚úÖ <strong>Parallel Development</strong>: Four teams work independently on feature branches<br />
‚úÖ <strong>Isolated Testing</strong>: Feature stands provide complete environments for QA<br />
‚úÖ <strong>Dynamic Deployment</strong>: Infrastructure automatically selects correct branch per service<br />
‚úÖ <strong>No Blocking</strong>: Teams don't block each other's development or releases<br />
‚úÖ <strong>Quality Gates</strong>: Code review and QA happen before merge to <code>dev</code> or <code>main</code><br />
‚úÖ <strong>Traceability</strong>: Branch names link to Jira tickets (CORE-100, RETAIL-250, etc.)</p>
<hr />
<h2 id="release-pipeline-automation">Release Pipeline &amp; Automation</h2>
<h3 id="cicd-pipeline-mandatory-checks">CI/CD Pipeline - Mandatory Checks</h3>
<p><strong>GitHub Actions Workflow (<code>.github/workflows/deploy.yml</code>):</strong></p>
<pre><code class="language-yaml">name: Deploy Microservice

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

env:
  SERVICE_NAME: user-service
  TEAM_NAME: core

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
      
      - name: Build with Maven
        run: mvn clean package -DskipTests
      
      - name: Run unit tests
        run: mvn test
      
      - name: Check code coverage (&gt;80%)
        run: |
          mvn jacoco:report
          mvn jacoco:check -Drule.coverage.minimum=0.80
  
  api-validation:
    runs-on: ubuntu-latest
    if: contains(github.event.head_commit.message, 'API')
    steps:
      - uses: actions/checkout@v3
      
      - name: Validate OpenAPI spec
        uses: char0n/swagger-editor-validate@v1
        with:
          definition-file: docs/openapi/${{ env.SERVICE_NAME }}-v3.yaml
      
      - name: Lint OpenAPI with Spectral
        run: |
          npm install -g @stoplight/spectral-cli
          spectral lint docs/openapi/${{ env.SERVICE_NAME }}-v3.yaml
      
      - name: Check for breaking changes
        uses: oasdiff/oasdiff-action@v0.0.15
        with:
          base: docs/openapi/${{ env.SERVICE_NAME }}-v2.yaml
          revision: docs/openapi/${{ env.SERVICE_NAME }}-v3.yaml
          fail-on-breaking: true
  
  kafka-validation:
    runs-on: ubuntu-latest
    if: contains(github.event.head_commit.message, 'Kafka')
    steps:
      - uses: actions/checkout@v3
      
      - name: Validate Avro schemas
        run: |
          for schema in kafka/schemas/*.avsc; do
            avro-tools compile schema $schema /tmp/compiled
          done
      
      - name: Check schema compatibility
        run: |
          # Check backward compatibility with Schema Registry
          curl -X POST \
            -H &quot;Content-Type: application/vnd.schemaregistry.v1+json&quot; \
            --data @kafka/schemas/order-created-v2.avsc \
            https://schema-registry.example.com/compatibility/subjects/retail.order.created-value/versions/latest
  
  contract-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Run Pact consumer tests
        run: mvn test -Dtest=*PactTest
      
      - name: Run Pact provider verification
        run: mvn test -Dtest=*PactVerificationTest
      
      - name: Publish contracts to Pact Broker
        run: mvn pact:publish
        env:
          PACT_BROKER_URL: https://pact-broker.example.com
          PACT_BROKER_TOKEN: ${{ secrets.PACT_BROKER_TOKEN }}
  
  security-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Run Snyk security scan
        uses: snyk/actions/maven@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
      
      - name: SonarQube scan
        run: |
          mvn sonar:sonar \
            -Dsonar.projectKey=${{ env.SERVICE_NAME }} \
            -Dsonar.host.url=https://sonarqube.example.com \
            -Dsonar.login=${{ secrets.SONAR_TOKEN }}
  
  docker-build:
    needs: [build, api-validation, kafka-validation, contract-tests, security-scan]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Build Docker image
        run: |
          docker build -t ${{ env.SERVICE_NAME }}:${{ github.sha }} .
          docker tag ${{ env.SERVICE_NAME }}:${{ github.sha }} \
            ${{ env.SERVICE_NAME }}:latest
      
      - name: Scan Docker image
        uses: aquasecurity/trivy-action@master
        with:
          image-ref: ${{ env.SERVICE_NAME }}:${{ github.sha }}
          format: 'sarif'
          output: 'trivy-results.sarif'
      
      - name: Push to registry
        run: |
          docker push ${{ env.SERVICE_NAME }}:${{ github.sha }}
          docker push ${{ env.SERVICE_NAME }}:latest
  
  deploy-dev:
    needs: docker-build
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to DEV
        run: |
          kubectl set image deployment/${{ env.SERVICE_NAME }} \
            ${{ env.SERVICE_NAME }}=${{ env.SERVICE_NAME }}:${{ github.sha }} \
            -n dev
          
          kubectl rollout status deployment/${{ env.SERVICE_NAME }} -n dev
      
      - name: Run smoke tests
        run: |
          ./scripts/smoke-tests.sh dev
      
      - name: Notify Slack
        uses: slackapi/slack-github-action@v1
        with:
          payload: |
            {
              &quot;text&quot;: &quot;‚úÖ Deployed to DEV: ${{ env.SERVICE_NAME }}&quot;,
              &quot;blocks&quot;: [
                {
                  &quot;type&quot;: &quot;section&quot;,
                  &quot;text&quot;: {
                    &quot;type&quot;: &quot;mrkdwn&quot;,
                    &quot;text&quot;: &quot;*Team:* ${{ env.TEAM_NAME }}\n*Service:* ${{ env.SERVICE_NAME }}\n*Version:* ${{ github.sha }}\n*Environment:* DEV\n*Triggered by:* ${{ github.actor }}&quot;
                  }
                }
              ]
            }
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_DEPLOYMENTS }}
</code></pre>
<h3 id="slack-notifications-enhanced-with-team-info">Slack Notifications - Enhanced with Team Info</h3>
<p><strong>Deployment Started:</strong></p>
<pre><code class="language-markdown">üöÄ **Deployment Started: user-service**

**Team:** Core Team  
**Service:** user-service  
**Version:** v3.0.0  
**Branch:** main  
**Commit:** abc1234 - &quot;Add firstName/lastName fields to User API&quot;  
**Author:** @john-doe (Core Team)  
**Environment:** Production  
**Status:** In Progress  
**Started:** 2026-01-15 14:33 UTC

**API Changes:**
‚ö†Ô∏è BREAKING: User API v2 ‚Üí v3 (firstName/lastName split)
üìñ Migration Guide: https://docs.example.com/api/v2-to-v3

**Kafka Topics Modified:**
‚Ä¢ core.user.updated (schema v2 ‚Üí v3)

**Affected Teams:**
‚Ä¢ Retail Team (checkout-service uses User API)
‚Ä¢ Redesign Team (web UI displays user names)

**Monitoring:** https://datadog.example.com/dashboard/user-service
</code></pre>
<p><strong>Deployment Complete:</strong></p>
<pre><code class="language-markdown">‚úÖ **Production Deployment Successful**

**Team:** Core Team  
**Service:** user-service  
**Version:** v3.0.0  
**Branch:** main  
**Commit:** abc1234 - &quot;Add firstName/lastName fields to User API&quot;  
**Author:** @john-doe  
**Triggered By:** @release-manager  
**Duration:** 14:33 - 14:47 UTC (14 minutes)  
**Instances:** 8/8 healthy

**Changes:**
‚Ä¢ ‚ú® Added firstName/lastName fields to User model
‚Ä¢ ‚ö†Ô∏è Deprecated fullName field (removed in v4)
‚Ä¢ üîß Improved authentication token caching
‚Ä¢ üì° Updated Kafka event schema (core.user.updated v3)

**API Version:**
‚Ä¢ v3.0.0 deployed (breaking change)
‚Ä¢ v2.5.3 still active (sunset: 2026-07-01)

**Canary Deployment:**
‚úÖ 10% traffic (5 min) - 0 errors, p95 latency 180ms
‚úÖ 50% traffic (10 min) - 0 errors, p95 latency 185ms
‚úÖ 100% traffic switched - all healthy

**Rollback Command:**
</code></pre>
<p>kubectl rollout undo deployment/user-service -n production</p>
<pre><code>
**Post-Deployment Checklist:**
‚úÖ Health checks passing
‚úÖ Error rate &lt; 0.1%
‚úÖ Latency within SLA (p95 &lt; 200ms)
‚úÖ Mobile app compatibility verified (v2 still works)
‚úÖ Monitoring dashboards updated

**Next Steps:**
‚Ä¢ Monitor v2 vs v3 usage over next 7 days
‚Ä¢ Mobile app v3.0 approval expected 2026-01-22
‚Ä¢ Schedule v2 sunset reminder (2026-06-15)
</code></pre>
<hr />
<h2 id="database-migrations-strategy">Database Migrations Strategy</h2>
<h3 id="expand-contract-pattern-with-separate-pipeline">Expand-Contract Pattern with Separate Pipeline</h3>
<p><strong>Phase 1: Expand (Backward Compatible)</strong></p>
<pre><code class="language-sql">-- Migration: 2026011501_add_user_name_fields.sql
-- Team: Core Team
-- Date: 2026-01-15
-- Description: Add firstName/lastName columns (expand phase)
-- Risk: Low (nullable columns, no data loss)
-- Estimated Time: 3 seconds
-- Tested: Staging with 5M rows

BEGIN;

-- Add new columns (nullable for backward compatibility)
ALTER TABLE users 
  ADD COLUMN first_name VARCHAR(100),
  ADD COLUMN last_name VARCHAR(100);

-- Create indexes for new columns
CREATE INDEX idx_users_first_name ON users(first_name);
CREATE INDEX idx_users_last_name ON users(last_name);

-- Backfill data from existing full_name column
-- (Run as separate migration after deploy to avoid long transaction)
-- UPDATE users SET 
--   first_name = SPLIT_PART(full_name, ' ', 1),
--   last_name = SPLIT_PART(full_name, ' ', 2)
-- WHERE first_name IS NULL;

COMMIT;

-- Rollback script (if needed):
-- ALTER TABLE users DROP COLUMN first_name, DROP COLUMN last_name;
</code></pre>
<p><strong>Phase 2: Code Deployment (1 week later)</strong></p>
<p>Deploy new code that reads/writes <code>firstName</code> and <code>lastName</code>, but still maintains <code>fullName</code> for backward compatibility.</p>
<p><strong>Phase 3: Contract (Cleanup, 2 weeks after code stable)</strong></p>
<pre><code class="language-sql">-- Migration: 2026012901_remove_full_name_column.sql
-- Team: Core Team
-- Date: 2026-01-29
-- Description: Remove deprecated full_name column (contract phase)
-- Risk: Medium (ensure all code uses new columns)
-- Estimated Time: 5 seconds

BEGIN;

-- Drop old column (only after confirming new columns populated)
ALTER TABLE users DROP COLUMN full_name;

-- Drop old index
DROP INDEX IF EXISTS idx_users_full_name;

COMMIT;

-- Rollback: Re-add column and backfill from first_name + last_name
-- (Document in incident runbook if needed)
</code></pre>
<h3 id="migration-slack-notification">Migration Slack Notification</h3>
<pre><code class="language-markdown">üóÑÔ∏è **Database Migration Applied**

**Migration:** 2026011501_add_user_name_fields.sql  
**Team:** Core Team  
**Service:** user-service  
**Database:** production (PostgreSQL 14)  
**Environment:** Production  
**Status:** ‚úÖ Success  
**Duration:** 2.8 seconds  
**Timestamp:** 2026-01-15 02:15 UTC (off-peak window)

**Changes:**
‚Ä¢ Added `first_name` column (VARCHAR(100), nullable)
‚Ä¢ Added `last_name` column (VARCHAR(100), nullable)
‚Ä¢ Created indexes on new columns

**Backward Compatibility:** ‚úÖ Yes
‚Ä¢ `full_name` column unchanged
‚Ä¢ Application continues to work during migration

**Phase:** Expand (1 of 3)
**Next Steps:**
1. Deploy application code (2026-01-15 14:00 UTC)
2. Backfill data (2026-01-16 02:00 UTC)
3. Remove `full_name` column (2026-01-29)

**Rollback:** Available (migration reversible)
</code></pre>
<p>kubectl exec -it migration-pod -- <br />
flyway undo -url=jdbc:postgresql://prod-db:5432/app</p>
<pre><code>
**Verification:**
</code></pre>
<p>-- Check new columns exist
SELECT first_name, last_name FROM users LIMIT 10;</p>
<pre><code>
**Monitoring:** https://datadog.example.com/dashboard/database-migrations
</code></pre>
<hr />
<h2 id="release-checklist-management">Release Checklist &amp; Management</h2>
<h3 id="pre-release-planning-t-3-days">Pre-Release Planning (T-3 Days)</h3>
<p><strong>Jira Release Setup:</strong></p>
<ol>
<li><p>Create version: <code>v2026.01.15</code> (date-based versioning)</p>
</li>
<li><p>Tag all completed tickets with team labels:</p>
<ul>
<li><code>team:retail</code></li>
<li><code>team:core</code></li>
<li><code>team:aml</code></li>
<li><code>team:redesign</code></li>
</ul>
</li>
<li><p><strong>Multi-Team Release Coordination:</strong></p>
</li>
</ol>
<pre><code class="language-markdown"># Release v2026.01.15 - Multi-Team Coordination

## Teams Involved
- ‚úÖ Core Team (2 services: user-service, payment-service)
- ‚úÖ Retail Team (1 service: checkout-service)
- ‚è∏Ô∏è AML Team (no deployments this release)
- ‚è∏Ô∏è Redesign Team (frontend only, deployed separately)

## Services Deploying
| Service | Team | Version | API Changes | Kafka Changes | Dependencies |
|---------|------|---------|-------------|---------------|--------------|
| user-service | Core | v3.0.0 | ‚ö†Ô∏è BREAKING (v2‚Üív3) | core.user.updated v3 | None |
| payment-service | Core | v2.5.1 | ‚úÖ MINOR (new field) | core.payment.completed v2.1 | user-service v3.0.0 |
| checkout-service | Retail | v1.8.0 | ‚úÖ PATCH (bug fix) | None | user-service v3.0.0, payment-service v2.5.1 |

## Deployment Order
1. **user-service** (no dependencies)
2. **payment-service** (depends on user-service)
3. **checkout-service** (depends on user-service + payment-service)

## Risk Assessment
**High Risk:**
- user-service v3.0.0 (breaking API change, affects mobile apps)

**Medium Risk:**
- payment-service v2.5.1 (new field, backward compatible)

**Low Risk:**
- checkout-service v1.8.0 (bug fix only)

## Rollback Plan
- user-service: Rollback to v2.5.3 (tested in staging)
- payment-service: Rollback to v2.5.0
- checkout-service: Rollback to v1.7.9

## Communication
- [x] Mobile team notified (3 weeks advance, 2025-12-25)
- [x] API consumers emailed (2026-01-01)
- [x] Slack announcement posted (`#api-updates`, 2026-01-10)
- [x] Confluence release notes published
</code></pre>
<h3 id="release-day-coordination-multi-team">Release Day Coordination (Multi-Team)</h3>
<p><strong>Timeline: 08:00 UTC Release Window</strong></p>
<p><strong>T-30 min (07:30 UTC):</strong></p>
<pre><code class="language-markdown">üì¢ **Release Window Opening in 30 Minutes**

**Release:** v2026.01.15  
**Teams:** Core (2 services), Retail (1 service)  
**Start Time:** 08:00 UTC  
**Expected Duration:** 45 minutes

**Deployment Order:**
1. Core Team: user-service v3.0.0 (08:00)
2. Core Team: payment-service v2.5.1 (08:15)
3. Retail Team: checkout-service v1.8.0 (08:30)

**On-Call:**
- Core Team: @john-doe
- Retail Team: @jane-smith
- Platform: @devops-oncall

**Monitoring Dashboards:**
- https://datadog.example.com/dashboard/release-2026-01-15

**Go/No-Go Poll:**
React with ‚úÖ if your team is ready
- Core Team: ___
- Retail Team: ___
- Platform: ___
- Release Manager: ___
</code></pre>
<p><strong>T-0 min (08:00 UTC) - Start Deployment:</strong></p>
<pre><code class="language-markdown">üöÄ **Release v2026.01.15 - STARTED**

**08:00 UTC - Deploying user-service v3.0.0 (Core Team)**

Status: In Progress...
Canary: 10% traffic ‚Üí monitoring for 5 minutes

[Live status updates in thread]
</code></pre>
<p><strong>T+15 min (08:15 UTC) - First Service Complete:</strong></p>
<pre><code class="language-markdown">‚úÖ **user-service v3.0.0 - DEPLOYED**

Duration: 15 minutes  
Status: Healthy (8/8 pods)  
Error rate: 0.03% (within SLA)  
Latency p95: 175ms (target: &lt;200ms)

**08:15 UTC - Deploying payment-service v2.5.1 (Core Team)**

Status: In Progress...
</code></pre>
<p><strong>T+45 min (08:45 UTC) - Release Complete:</strong></p>
<pre><code class="language-markdown">üéâ **Release v2026.01.15 - COMPLETE**

**Duration:** 45 minutes (08:00 - 08:45 UTC)  
**Status:** ‚úÖ All services healthy

**Deployed Services:**
| Service | Version | Team | Status | Instances |
|---------|---------|------|--------|-----------|
| user-service | v3.0.0 | Core | ‚úÖ Healthy | 8/8 |
| payment-service | v2.5.1 | Core | ‚úÖ Healthy | 6/6 |
| checkout-service | v1.8.0 | Retail | ‚úÖ Healthy | 10/10 |

**Key Metrics:**
- Total error rate: 0.05% (baseline: 0.04%)
- Avg latency p95: 180ms (target: &lt;200ms)
- No alerts triggered

**API Changes:**
- ‚ö†Ô∏è user-service v3 deployed (v2 still active, sunset: 2026-07-01)
- ‚úÖ payment-service backward compatible

**Mobile Compatibility:**
- ‚úÖ iOS v2.5 tested against production (works via v2 API)
- ‚úÖ Android v2.5 tested against production (works via v2 API)
- üöÄ iOS v3.0 / Android v3.0 in review (expected approval: 2026-01-22)

**Post-Release Monitoring:**
Next 24 hours: Watch for:
- Error rate increase
- Latency degradation
- v2 vs v3 API usage patterns

**Release Notes:** https://docs.example.com/releases/v2026-01-15
</code></pre>
<hr />
<h2 id="incident-management-process">Incident Management Process</h2>
<h3 id="incident-severity-levels">Incident Severity Levels</h3>
<table>
<thead>
<tr>
<th><strong>Level</strong></th>
<th><strong>Description</strong></th>
<th><strong>Response Time</strong></th>
<th><strong>Teams Involved</strong></th>
<th><strong>Notification</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SEV-1</strong></td>
<td>Complete outage, payment failures, data loss, &gt;1000 users</td>
<td>5 min</td>
<td>All hands on deck, all teams swarm</td>
<td>Slack + PagerDuty + Phone</td>
</tr>
<tr>
<td><strong>SEV-2</strong></td>
<td>Major feature broken, 100-1000 users, significant degradation</td>
<td>15 min</td>
<td>Owning team + Platform</td>
<td>Slack + PagerDuty</td>
</tr>
<tr>
<td><strong>SEV-3</strong></td>
<td>Single feature broken, 10-100 users, workaround exists</td>
<td>1 hour</td>
<td>Owning team</td>
<td>Slack</td>
</tr>
<tr>
<td><strong>SEV-4</strong></td>
<td>Minor bug, &lt;10 users, cosmetic issue</td>
<td>Next business day</td>
<td>Owning team</td>
<td>Jira ticket</td>
</tr>
</tbody>
</table>
<h3 id="team-specific-on-call-rotation">Team-Specific On-Call Rotation</h3>
<p><strong>PagerDuty Schedule:</strong></p>
<pre><code>Week 1 (Jan 8-14):
  Primary: Core Team (@john-doe)
  Secondary: Retail Team (@jane-smith)
  Escalation: Platform Lead (@platform-lead)

Week 2 (Jan 15-21):
  Primary: Retail Team (@jane-smith)
  Secondary: AML Team (@aml-lead)
  Escalation: Platform Lead (@platform-lead)

Week 3 (Jan 22-28):
  Primary: AML Team (@aml-lead)
  Secondary: Core Team (@john-doe)
  Escalation: Platform Lead (@platform-lead)

Week 4 (Jan 29-Feb 4):
  Primary: Redesign Team (@redesign-dev) + Platform (shared)
  Secondary: Core Team (@john-doe)
  Escalation: Platform Lead (@platform-lead)
</code></pre>
<p><strong>Note:</strong> Redesign Team (1 dev) has lighter on-call burden, paired with Platform for backup.</p>
<h3 id="incident-response-by-team">Incident Response by Team</h3>
<p><strong>Example: Payment Service Outage (SEV-1)</strong></p>
<pre><code class="language-markdown">üö® **INCIDENT DETECTED - SEV-1**

**Incident:** Payment failures (all transactions timing out)  
**Service:** payment-service  
**Owning Team:** Core Team  
**Severity:** SEV-1 (Critical - payments down)  
**Status:** Investigating  
**Reported:** 2026-01-16 14:32:15 UTC  
**Reporter:** monitoring-bot (Datadog alert)

**Current Impact:**
- Error rate: 98% (baseline: 0.05%)
- p99 latency: 30 seconds (baseline: 300ms)
- Affected users: ~2,000 (checkout blocked)
- Revenue impact: $15,000/hour

**Incident Commander:** @john-doe (Core Team)  
**Technical Lead:** @jane-smith (Core Team)  
**On-Call Engineer:** @john-doe (Core Team primary)  
**Communications Lead:** @platform-lead

**Teams Alerted:**
- ‚úÖ Core Team (owns payment-service)
- ‚úÖ Retail Team (checkout-service depends on payments)
- ‚úÖ Platform Team (infrastructure support)
- ‚è∏Ô∏è AML Team (monitoring only, not affected)
- ‚è∏Ô∏è Redesign Team (monitoring only)

**Quick Links:**
üìä Metrics: https://datadog.example.com/dashboard/payment-service
üìã Runbook: https://docs.example.com/runbooks/payment-outage
üîç Logs: https://logs.example.com/payment-service
‚öôÔ∏è Service Map: https://docs.example.com/architecture/services

**Escalation Chain:**
1. Core Team on-call ‚Üí @john-doe (active)
2. Core Team secondary ‚Üí @team-member-2 (notified)
3. Platform Lead ‚Üí @platform-lead (notified)
4. CTO ‚Üí @cto (notify if not resolved in 30 min)

**All teams:** React ‚úÖ when aware
</code></pre>
<p><strong>Investigation Timeline:</strong></p>
<pre><code class="language-markdown">**[14:32:15]** Datadog alert fires (payment-service error rate &gt; 5%)  
**[14:32:45]** PagerDuty pages Core Team on-call (@john-doe)  
**[14:33:00]** @john-doe acknowledges, creates incident channel `#incident-2026-01-16-001`  
**[14:35:00]** @john-doe checks recent deployments ‚Üí payment-service v2.5.1 deployed 14:20 UTC  
**[14:36:00]** Hypothesis: Recent deployment caused issue  
**[14:38:00]** @john-doe reviews logs ‚Üí seeing &quot;Connection timeout to database&quot; errors  
**[14:40:00]** Database check ‚Üí connection pool exhausted (max 50, current 50)  
**[14:42:00]** Root cause: New code in v2.5.1 not releasing connections properly  
**[14:44:00]** Decision: **Rollback to v2.5.0** (fastest resolution)  
**[14:45:00]** Rollback initiated: `kubectl rollout undo deployment/payment-service -n production`  
**[14:48:00]** Rollback complete, error rate dropping  
**[14:50:30]** Error rate normalized to 0.08%, incident resolved  

**Total Duration:** 18 minutes (14:32 - 14:50 UTC)
</code></pre>
<p><strong>Resolution Post:</strong></p>
<pre><code class="language-markdown">‚úÖ **INCIDENT RESOLVED - SEV-1**

**Incident:** Payment failures  
**Duration:** 18 minutes (14:32 - 14:50 UTC)  
**Resolution:** Rolled back payment-service to v2.5.0  
**Root Cause:** Connection leak in v2.5.1 code

**Timeline:**
- 14:32:00 - Alert fired
- 14:35:00 - On-call investigating
- 14:44:00 - Rollback initiated
- 14:50:30 - Service recovered

**Impact:**
- Peak error rate: 98%
- Affected users: ~2,000
- Failed transactions: ~450
- Revenue impact: ~$4,500 (18 min downtime)

**Teams Involved:**
- Core Team (investigation + rollback)
- Retail Team (monitored checkout impact)
- Platform Team (Kubernetes rollback support)

**Follow-Up:**
- ‚úÖ Postmortem scheduled: 2026-01-17 16:00 UTC
- ‚úÖ Jira incident: INC-2456
- ‚úÖ Fix planned: Connection pool management review
- ‚úÖ Prevention: Add connection leak detection to CI/CD

**Lessons Learned:**
1. Connection pool monitoring should trigger alerts earlier
2. Load testing should include connection pool stress tests
3. Rollback procedure worked perfectly (3 min execution)

**Thanks to:**
@john-doe (IC), @jane-smith (TL), @platform-lead (Comms)
</code></pre>
<hr />
<h2 id="post-incident-review-postmortem">Post-Incident Review (Postmortem)</h2>
<h3 id="blameless-postmortem-template">Blameless Postmortem Template</h3>
<p><strong>Meeting:</strong> 24 hours after incident resolution, 90 minutes</p>
<p><strong>Attendees:</strong></p>
<ul>
<li>Incident Commander (Core Team - @john-doe)</li>
<li>Technical Lead (Core Team - @jane-smith)</li>
<li>On-call engineer (Core Team - @john-doe)</li>
<li>Retail Team representative (affected consumer)</li>
<li>Platform Team representative (infrastructure)</li>
<li>Product Owner (optional, if customer-facing)</li>
</ul>
<p><strong>Postmortem Document:</strong></p>
<pre><code class="language-markdown"># Postmortem: Payment Service Outage - 2026-01-16

## Summary
Payment-service experienced 18-minute outage due to database connection pool exhaustion introduced in v2.5.1 deployment.

**Severity:** SEV-1 (Critical)  
**Duration:** 18 minutes (14:32 - 14:50 UTC)  
**Impact:** 2,000 users, 450 failed transactions, $4,500 revenue loss  
**Team:** Core Team  
**Resolution:** Rollback to v2.5.0

---

## Timeline

| Time | Event | Actor |
|------|-------|-------|
| 14:20:00 | payment-service v2.5.1 deployed | Core Team |
| 14:30:00 | Connection pool begins filling | System |
| 14:32:15 | Error rate spike detected (98%) | Datadog |
| 14:32:45 | PagerDuty pages on-call | PagerDuty |
| 14:33:00 | Incident declared in Slack | @john-doe |
| 14:35:00 | Recent deployment identified as cause | @john-doe |
| 14:40:00 | Database connection pool exhaustion confirmed | @john-doe |
| 14:42:00 | Root cause: connection leak in new code | @jane-smith |
| 14:44:00 | Rollback decision made | @john-doe (IC) |
| 14:45:00 | Rollback initiated | @john-doe |
| 14:48:00 | Rollback complete | Kubernetes |
| 14:50:30 | Error rate normalized, incident resolved | @john-doe |

**Total Duration:** 18 minutes

---

## Root Cause

**Primary Cause:**  
Code merged in v2.5.1 introduced database connection leak. New payment retry logic opened connections but failed to close them in error paths.

**Code Snippet (Problematic):**
</code></pre>
<p>public PaymentResult processPayment(PaymentRequest request) {
Connection conn = dataSource.getConnection(); // Opened
try {
return executePayment(conn, request);
} catch (PaymentException e) {
// Connection not closed in error path!
throw new RuntimeException(e);
}
}</p>
<pre><code>
**What Happened:**  
1. Payment failures triggered retry logic
2. Each retry opened new connection without closing previous
3. Within 10 minutes, all 50 connections exhausted
4. New payment requests waited indefinitely, timing out

**Contributing Factors:**
1. Code review missed unclosed connection in error path
2. Integration tests didn't simulate connection pool exhaustion
3. Load testing didn't run long enough to detect leak (only 5 min)
4. Connection pool alerts set too high (threshold: 90%, exhausted at 100%)
5. No database connection leak detection in CI/CD

---

## What Went Well

‚úÖ **Rollback procedure worked perfectly** (3 minutes execution)  
‚úÖ **On-call responded immediately** (within 2 minutes)  
‚úÖ **Clear incident communication** (updates every 5 minutes)  
‚úÖ **Team coordination excellent** (Core + Retail + Platform)  
‚úÖ **Monitoring detected issue instantly** (alert within 30 seconds)  
‚úÖ **Good runbooks** (database troubleshooting steps documented)  
‚úÖ **Blue-green deployment** enabled fast rollback  

---

## What Could Improve

‚ùå **Connection leak not caught in code review**  
‚ùå **Load testing too short** (5 min vs production 24/7)  
‚ùå **Connection pool alerts too high** (90% threshold)  
‚ùå **No connection leak detection in CI/CD**  
‚ùå **Error path testing incomplete** (happy path only)  

---

## Action Items

### Preventive (Stop It Happening Again)

| Action | Owner | Due | Priority | Status |
|--------|-------|-----|----------|--------|
| Add connection leak detection to CI/CD (Mockito resource leak plugin) | Core Team | 2026-01-23 | P0 | üü° In Progress |
| Update code review checklist: &quot;All resources closed in error paths?&quot; | Tech Leads | 2026-01-18 | P1 | ‚úÖ Done |
| Extend load testing duration (5 min ‚Üí 30 min) | QA Team | 2026-01-30 | P1 | üü° In Progress |
| Add integration test: connection pool exhaustion scenario | Core Team | 2026-01-25 | P1 | üî¥ Not Started |
| Review all services for similar connection management patterns | All Teams | 2026-02-15 | P2 | üî¥ Not Started |

### Detective (Catch It Earlier)

| Action | Owner | Due | Priority | Status |
|--------|-------|-----|----------|--------|
| Lower connection pool alert threshold (90% ‚Üí 75%) | Platform | 2026-01-18 | P0 | ‚úÖ Done |
| Add connection pool growth rate monitoring | Platform | 2026-01-20 | P1 | üü° In Progress |
| Create Datadog dashboard: &quot;Database Connection Health&quot; | Platform | 2026-01-25 | P2 | üî¥ Not Started |
| Weekly connection pool usage report (automated) | Platform | 2026-02-01 | P2 | üî¥ Not Started |

### Responsive (Fix It Faster)

| Action | Owner | Due | Priority | Status |
|--------|-------|-----|----------|--------|
| Document connection pool troubleshooting in runbook | Core Team | 2026-01-18 | P2 | ‚úÖ Done |
| Add &quot;kill active connections&quot; button in admin dashboard | Platform | 2026-02-15 | P3 | üî¥ Not Started |
| Practice rollback drill quarterly | All Teams | 2026-04-01 | P2 | üî¥ Not Started |

---

## Lessons Learned

1. **Connection management is critical**: Always use try-with-resources or explicit close in finally blocks
2. **Load testing duration matters**: 5 minutes isn't enough to detect slow leaks
3. **Alert thresholds need tuning**: 90% connection pool usage is too late
4. **Code review checklists work**: Need to add resource management checks
5. **Rollback is your friend**: Fast rollback (3 min) limited impact significantly
6. **Team coordination excellent**: Cross-team communication prevented confusion

---

## Metrics

**Detection Time (MTTD):** 30 seconds (alert fired 30s after threshold breach)  
**Response Time:** 2 minutes (on-call acknowledged within 2 min)  
**Resolution Time (MTTR):** 18 minutes (incident resolved)  
**Total Downtime:** 18 minutes  

**DORA Metrics Impact:**
- Deployment frequency: No impact (still deploying daily)
- Lead time for changes: No impact
- Change failure rate: 1 failed deployment / 15 total = **6.7%** (target: &lt;15% ‚úÖ)
- Time to restore service: **18 minutes** (target: &lt;1 hour ‚úÖ)

---

## Related Tickets

**Postmortem Actions:**
- DEV-1234: Add connection leak detection to CI/CD (P0)
- DEV-1235: Extend load testing duration (P1)
- OPS-1236: Lower connection pool alerts (P0) ‚úÖ Done
- QA-1237: Add connection pool exhaustion test (P1)

**Incident Ticket:** INC-2456

---

## Sign-Off

**Reviewed by:** Core Team, Platform Team, Engineering Manager  
**Review Date:** 2026-01-17  
**Status:** ‚úÖ Approved  
**Follow-Up:** 2026-02-15 (review action item completion)

---

**Document Owner:** Core Team Lead  
**Last Updated:** 2026-01-17  
**Next Review:** 2026-02-15
</code></pre>
<hr />
<h2 id="tools-integration-recommendations">Tools &amp; Integration Recommendations</h2>
<h3 id="tool-stack-summary">Tool Stack Summary</h3>
<table>
<thead>
<tr>
<th><strong>Category</strong></th>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
<th><strong>Teams Using</strong></th>
<th><strong>Cost</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Source Control</strong></td>
<td>GitHub/GitLab</td>
<td>Code repositories, CODEOWNERS, merge queue</td>
<td>All teams</td>
<td>Included</td>
</tr>
<tr>
<td><strong>CI/CD</strong></td>
<td>GitHub Actions / GitLab CI</td>
<td>Automated testing, deployment</td>
<td>All teams</td>
<td>Included</td>
</tr>
<tr>
<td><strong>Kubernetes</strong></td>
<td>K8s + Helm</td>
<td>Container orchestration</td>
<td>All teams</td>
<td>Free (self-hosted)</td>
</tr>
<tr>
<td><strong>GitOps</strong></td>
<td>ArgoCD</td>
<td>Declarative deployments, rollback</td>
<td>Platform</td>
<td>Free (OSS)</td>
</tr>
<tr>
<td><strong>API Documentation</strong></td>
<td>Swagger UI + Redoc</td>
<td>OpenAPI spec rendering</td>
<td>All teams</td>
<td>Free (OSS)</td>
</tr>
<tr>
<td><strong>API Contract Testing</strong></td>
<td>Pact</td>
<td>Consumer-driven contracts</td>
<td>All teams</td>
<td>Free (OSS) + Pact Broker</td>
</tr>
<tr>
<td><strong>API Validation</strong></td>
<td>Spectral</td>
<td>OpenAPI linting</td>
<td>All teams (CI/CD)</td>
<td>Free (OSS)</td>
</tr>
<tr>
<td><strong>Messaging</strong></td>
<td>Apache Kafka</td>
<td>Event-driven communication</td>
<td>All teams</td>
<td>Free (self-hosted)</td>
</tr>
<tr>
<td><strong>Schema Registry</strong></td>
<td>Confluent Schema Registry</td>
<td>Avro schema management</td>
<td>Platform</td>
<td>Free (community)</td>
</tr>
<tr>
<td><strong>Monitoring</strong></td>
<td>Datadog or Prometheus+Grafana</td>
<td>Metrics, logs, traces</td>
<td>All teams</td>
<td>$500/mo or Free (OSS)</td>
</tr>
<tr>
<td><strong>Incident Management</strong></td>
<td>PagerDuty</td>
<td>On-call, alerting, escalation</td>
<td>All teams</td>
<td>$50-100/mo</td>
</tr>
<tr>
<td><strong>Database Migration</strong></td>
<td>Flyway</td>
<td>SQL migrations</td>
<td>All teams</td>
<td>Free (OSS)</td>
</tr>
<tr>
<td><strong>Communication</strong></td>
<td>Slack</td>
<td>Team communication, notifications</td>
<td>All teams</td>
<td>$8/user/mo</td>
</tr>
<tr>
<td><strong>Project Management</strong></td>
<td>Jira</td>
<td>Kanban board, release tracking</td>
<td>All teams</td>
<td>$10/user/mo</td>
</tr>
<tr>
<td><strong>Documentation</strong></td>
<td>Confluence</td>
<td>Runbooks, postmortems, guides</td>
<td>All teams</td>
<td>$10/user/mo</td>
</tr>
</tbody>
</table>
<h3 id="team-specific-tool-access">Team-Specific Tool Access</h3>
<p><strong>Core Team (2 devs):</strong></p>
<ul>
<li>Full access: GitHub, Jira, Confluence, Datadog, PagerDuty</li>
<li>Admin access: user-service, auth-service, payment-service repos</li>
<li>Kafka admin: core.* topics</li>
</ul>
<p><strong>Retail Team (3 devs):</strong></p>
<ul>
<li>Full access: GitHub, Jira, Confluence, Datadog, PagerDuty</li>
<li>Admin access: product-catalog-service, cart-service, checkout-service, order-service repos</li>
<li>Kafka admin: retail.* topics</li>
</ul>
<p><strong>AML Team (2 devs):</strong></p>
<ul>
<li>Full access: GitHub, Jira, Confluence, Datadog, PagerDuty</li>
<li>Admin access: transaction-monitor-service, compliance-report-service repos</li>
<li>Kafka admin: aml.* topics</li>
<li>Read access: core.payment.* topics (for monitoring)</li>
</ul>
<p><strong>Redesign Team (1 dev):</strong></p>
<ul>
<li>Full access: GitHub, Jira, Confluence, Datadog</li>
<li>Limited PagerDuty: Paired with Platform for on-call (lighter rotation)</li>
<li>Admin access: api-gateway, web-frontend repos</li>
<li>Read-only: All service repos (for API integration)</li>
</ul>
<hr />
<h2 id="secure-git-data-practices">Secure Git Data Practices</h2>
<h3 id="critical-rules-never-commit-sensitive-data">Critical Rules: Never Commit Sensitive Data</h3>
<p><strong>What NEVER Goes in Git:</strong></p>
<table>
<thead>
<tr>
<th><strong>Type</strong></th>
<th><strong>Examples</strong></th>
<th><strong>Risk Level</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>API Keys</strong></td>
<td>Stripe API keys, AWS access keys, Google Maps API keys</td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Credentials</strong></td>
<td>Database passwords, service account passwords, OAuth secrets</td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Private Keys</strong></td>
<td>SSH private keys, SSL/TLS certificates, signing keys</td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Tokens</strong></td>
<td>JWT secrets, OAuth tokens, access tokens, refresh tokens</td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Connection Strings</strong></td>
<td>Database connection strings with passwords, Redis URLs with auth</td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Environment-Specific Config</strong></td>
<td>Production database URLs, production API endpoints</td>
<td>üü° High</td>
</tr>
<tr>
<td><strong>Secrets Files</strong></td>
<td><code>.env</code> files, <code>secrets.yaml</code>, <code>credentials.json</code></td>
<td>üî¥ Critical</td>
</tr>
<tr>
<td><strong>Hardcoded Credentials</strong></td>
<td>Any passwords, keys, or tokens in source code</td>
<td>üî¥ Critical</td>
</tr>
</tbody>
</table>
<p><strong>Why This Matters:</strong></p>
<ul>
<li><strong>Git History is Permanent</strong>: Even if you delete a file, it remains in git history forever</li>
<li><strong>Public Repos</strong>: Accidental public exposure exposes all historical commits</li>
<li><strong>Compliance</strong>: GDPR, PCI-DSS, SOC 2 require strict credential management</li>
<li><strong>Security Breaches</strong>: Leaked credentials can lead to data breaches, financial loss, reputation damage</li>
</ul>
<h3 id="backend-best-practices-java-microservices">Backend Best Practices (Java Microservices)</h3>
<h4 id="1-use-environment-variables">1. Use Environment Variables</h4>
<p><strong>Never do this:</strong></p>
<pre><code>// ‚ùå BAD: Hardcoded credentials
public class PaymentService {
    private static final String STRIPE_API_KEY = "sk_live_51AbCdEfGhIjKlMnOpQrStUvWxYz";
    private static final String DB_PASSWORD = "mySecretPassword123";
}
</code></pre>
<p><strong>Do this instead:</strong></p>
<pre><code>// ‚úÖ GOOD: Environment variables
@Configuration
public class PaymentConfig {
    @Value("${stripe.api.key}")
    private String stripeApiKey;
    
    @Value("${database.password}")
    private String dbPassword;
}
</code></pre>
<p><strong>Application Properties (<code>application.yml</code>):</strong></p>
<pre><code># ‚úÖ GOOD: Reference environment variables
stripe:
  api:
    key: ${STRIPE_API_KEY}

database:
  password: ${DB_PASSWORD}
  url: ${DB_URL:jdbc:postgresql://localhost:5432/mydb}
</code></pre>
<h4 id="2-use-spring-cloud-config-or-kubernetes-secrets">2. Use Spring Cloud Config or Kubernetes Secrets</h4>
<p><strong>Kubernetes Secret (for production):</strong></p>
<pre><code># k8s/secrets/payment-service-secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: payment-service-secrets
  namespace: production
type: Opaque
stringData:
  stripe-api-key: "sk_live_..."
  db-password: "secure-password"
</code></pre>
<h4 id="3-use-gitignore-for-local-development">3. Use <code>.gitignore</code> for Local Development</h4>
<p><strong><code>.gitignore</code> (Java/Spring Boot):</strong></p>
<pre><code># Environment files
.env
.env.local
.env.*.local
*.env

# Configuration with secrets
application-local.yml
application-prod.yml
application-secrets.yml
config/local.properties
config/secrets.properties

# IDE files (may contain paths)
.idea/
.vscode/
*.iml

# Logs (may contain sensitive data)
logs/
*.log
</code></pre>
<h4 id="4-use-envexample-template">4. Use <code>.env.example</code> Template</h4>
<p><strong>Create <code>.env.example</code> (committed to git):</strong></p>
<pre><code># .env.example
# Copy this file to .env and fill in your values
# DO NOT commit .env to git

# Stripe API Keys
STRIPE_API_KEY=sk_test_your_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here

# Database
DB_URL=jdbc:postgresql://localhost:5432/mydb
DB_USERNAME=your_username
DB_PASSWORD=your_password

# JWT Secrets
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRATION=86400000
</code></pre>
<h3 id="frontend-best-practices-web-applications">Frontend Best Practices (Web Applications)</h3>
<h4 id="1-never-commit-api-keys-in-frontend-code">1. Never Commit API Keys in Frontend Code</h4>
<p><strong>Never do this:</strong></p>
<pre><code>// ‚ùå BAD: Hardcoded API key in frontend
const GOOGLE_MAPS_API_KEY = "AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz123456";
const STRIPE_PUBLISHABLE_KEY = "pk_live_51AbCdEfGhIjKlMnOpQrStUvWxYz";
</code></pre>
<p><strong>Do this instead:</strong></p>
<pre><code>// ‚úÖ GOOD: Environment variables (build-time)
const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;
const STRIPE_PUBLISHABLE_KEY = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;
</code></pre>
<p><strong>Note:</strong> Frontend environment variables are embedded in the build, so only use <strong>public</strong> keys (like Stripe publishable keys). Never use <strong>secret</strong> keys in frontend code.</p>
<h4 id="2-use-environment-variables-build-time">2. Use Environment Variables (Build-Time)</h4>
<p><strong><code>.env.local</code> (not committed):</strong></p>
<pre><code># .env.local
REACT_APP_GOOGLE_MAPS_API_KEY=AIzaSy...
REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_...
REACT_APP_API_BASE_URL=https://api.example.com
</code></pre>
<h4 id="3-use-backend-proxy-for-secret-keys">3. Use Backend Proxy for Secret Keys</h4>
<p><strong>For secret operations, proxy through backend:</strong></p>
<pre><code>// ‚úÖ GOOD: Secret operations go through backend
// Frontend calls backend API, backend uses secret key
async function processPayment(paymentData) {
  const response = await fetch('/api/payments/process', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(paymentData)
  });
  return response.json();
}
</code></pre>
<h3 id="mobile-app-best-practices-flutter">Mobile App Best Practices (Flutter)</h3>
<h4 id="1-use-environment-variables-with-flutter_dotenv">1. Use Environment Variables with <code>flutter_dotenv</code></h4>
<p><strong>Never do this:</strong></p>
<pre><code>// ‚ùå BAD: Hardcoded API key
class ApiConfig {
  static const String apiKey = "sk_live_51AbCdEfGhIjKlMnOpQrStUvWxYz";
  static const String apiBaseUrl = "https://api.example.com";
}
</code></pre>
<p><strong>Do this instead:</strong></p>
<pre><code>// ‚úÖ GOOD: Environment variables using flutter_dotenv
import 'package:flutter_dotenv/flutter_dotenv.dart';

class ApiConfig {
  static String get apiKey => dotenv.env['API_KEY'] ?? '';
  static String get apiBaseUrl => dotenv.env['API_BASE_URL'] ?? '';
  static String get stripePublishableKey => dotenv.env['STRIPE_PUBLISHABLE_KEY'] ?? '';
}

// Initialize in main.dart
Future<void> main() async {
  await dotenv.load(fileName: ".env");
  runApp(MyApp());
}
</code></pre>
<p><strong>Add dependency to <code>pubspec.yaml</code>:</strong></p>
<pre><code>dependencies:
  flutter_dotenv: ^5.1.0
</code></pre>
<p><strong><code>.env</code> (not committed, in <code>.gitignore</code>):</strong></p>
<pre><code># .env
API_KEY=your_api_key_here
API_BASE_URL=https://api.example.com
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
GOOGLE_MAPS_API_KEY=AIzaSy_your_key_here
</code></pre>
<p><strong><code>.env.example</code> (committed):</strong></p>
<pre><code># .env.example
# Copy this file to .env and fill in your values
# DO NOT commit .env to git

API_KEY=your_api_key_here
API_BASE_URL=https://api-staging.example.com
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
GOOGLE_MAPS_API_KEY=AIzaSy_your_key_here
</code></pre>
<p><strong>Update <code>pubspec.yaml</code> to include <code>.env</code> file:</strong></p>
<pre><code>flutter:
  assets:
    - .env
</code></pre>
<p><strong><code>.gitignore</code>:</strong></p>
<pre><code># Flutter
.env
.env.local
.env.*.local
*.env

# Build files
build/
.dart_tool/
.packages
.pub-cache/
.pub/
</code></pre>
<h4 id="2-use-build-configuration-files-for-different-environments">2. Use Build Configuration Files for Different Environments</h4>
<p><strong>Create environment-specific config files:</strong></p>
<p><strong><code>lib/config/app_config.dart</code>:</strong></p>
<pre><code>// lib/config/app_config.dart
class AppConfig {
  static const String environment = String.fromEnvironment(
    'ENVIRONMENT',
    defaultValue: 'dev',
  );
  
  static String get apiBaseUrl {
    switch (environment) {
      case 'prod':
        return dotenv.env['API_BASE_URL_PROD'] ?? '';
      case 'staging':
        return dotenv.env['API_BASE_URL_STAGING'] ?? '';
      default:
        return dotenv.env['API_BASE_URL_DEV'] ?? 'http://localhost:8080';
    }
  }
  
  static bool get isProduction => environment == 'prod';
  static bool get isStaging => environment == 'staging';
  static bool get isDevelopment => environment == 'dev';
}
</code></pre>
<p><strong>Build commands for different environments:</strong></p>
<pre><code># Development
flutter run --dart-define=ENVIRONMENT=dev

# Staging
flutter build apk --dart-define=ENVIRONMENT=staging
flutter build ios --dart-define=ENVIRONMENT=staging

# Production
flutter build apk --release --dart-define=ENVIRONMENT=prod
flutter build ios --release --dart-define=ENVIRONMENT=prod
</code></pre>
<h4 id="3-use-dart-define-for-cicd-secrets">3. Use <code>--dart-define</code> for CI/CD Secrets</h4>
<p><strong>For CI/CD pipelines, pass secrets as build arguments:</strong></p>
<p><strong>GitHub Actions example:</strong></p>
<pre><code># .github/workflows/build-flutter.yml
name: Build Flutter App

on:
  push:
    branches: [main]

jobs:
  build-android:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.16.0'
      
      - name: Build APK
        run: |
          flutter build apk --release \
            --dart-define=ENVIRONMENT=prod \
            --dart-define=API_KEY=${{ secrets.API_KEY }} \
            --dart-define=API_BASE_URL=${{ secrets.API_BASE_URL }}
</code></pre>
<p><strong>Access in code:</strong></p>
<pre><code>// lib/config/secrets.dart
class Secrets {
  static String get apiKey => const String.fromEnvironment(
    'API_KEY',
    defaultValue: '',
  );
  
  static String get apiBaseUrl => const String.fromEnvironment(
    'API_BASE_URL',
    defaultValue: 'https://api.example.com',
  );
}
</code></pre>
<h4 id="4-use-flutter_config-package-for-native-platform-integration">4. Use <code>flutter_config</code> Package for Native Platform Integration</h4>
<p><strong>For accessing secrets in native iOS/Android code:</strong></p>
<p><strong>Add dependency:</strong></p>
<pre><code>dependencies:
  flutter_config: ^2.0.0
</code></pre>
<p><strong>Create <code>flutter_config.dart</code>:</strong></p>
<pre><code>import 'package:flutter_config/flutter_config.dart';

class AppSecrets {
  static String get apiKey => FlutterConfig.get('API_KEY');
  static String get apiBaseUrl => FlutterConfig.get('API_BASE_URL');
}
</code></pre>
<h4 id="5-use-environment-specific-app-icons-and-names">5. Use Environment-Specific App Icons and Names</h4>
<p><strong>Create flavor-specific configurations:</strong></p>
<p><strong><code>android/app/build.gradle</code>:</strong></p>
<pre><code>android {
    flavorDimensions "environment"
    productFlavors {
        dev {
            dimension "environment"
            applicationIdSuffix ".dev"
            resValue "string", "app_name", "MyApp Dev"
        }
        staging {
            dimension "environment"
            applicationIdSuffix ".staging"
            resValue "string", "app_name", "MyApp Staging"
        }
        prod {
            dimension "environment"
            resValue "string", "app_name", "MyApp"
        }
    }
}
</code></pre>
<p><strong>Build with flavor:</strong></p>
<pre><code># Development
flutter build apk --flavor dev

# Staging
flutter build apk --flavor staging

# Production
flutter build apk --flavor prod --release
</code></pre>
<h3 id="making-it-convenient-for-local-development">Making It Convenient for Local Development</h3>
<h4 id="1-create-setup-scripts">1. Create Setup Scripts</h4>
<p><strong><code>scripts/setup-local-dev.sh</code>:</strong></p>
<pre><code>#!/bin/bash
# Setup script for local development

echo "üöÄ Setting up local development environment..."

# Backend services
echo "üì¶ Setting up backend services..."
for service in user-service payment-service checkout-service; do
    if [ ! -f "services/$service/.env" ]; then
        echo "Creating .env for $service..."
        cp "services/$service/.env.example" "services/$service/.env"
        echo "‚ö†Ô∏è  Please fill in credentials in services/$service/.env"
    fi
done

# Frontend
echo "üåê Setting up frontend..."
if [ ! -f "web-frontend/.env.local" ]; then
    cp "web-frontend/.env.example" "web-frontend/.env.local"
    echo "‚ö†Ô∏è  Please fill in API keys in web-frontend/.env.local"
fi
</code></pre>
<h4 id="2-use-docker-compose-with-environment-files">2. Use Docker Compose with Environment Files</h4>
<p><strong><code>docker-compose.local.yml</code>:</strong></p>
<pre><code>version: '3.8'
services:
  user-service:
    build: ./services/user-service
    env_file:
      - ./services/user-service/.env.local
    environment:
      - DB_URL=${DB_URL:-jdbc:postgresql://db:5432/userdb}
      - DB_USERNAME=${DB_USERNAME:-postgres}
      - DB_PASSWORD=${DB_PASSWORD:-postgres}
</code></pre>
<h4 id="3-use-cicd-secrets-for-different-stages">3. Use CI/CD Secrets for Different Stages</h4>
<p><strong>GitHub Actions Secrets:</strong></p>
<pre><code># .github/workflows/deploy.yml
name: Deploy to Environment

on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: true
        type: choice
        options:
          - dev
          - staging
          - production

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Deploy to ${{ github.event.inputs.environment }}
        env:
          STRIPE_API_KEY: ${{ secrets[format('STRIPE_API_KEY_{0}', github.event.inputs.environment)] }}
          DB_PASSWORD: ${{ secrets[format('DB_PASSWORD_{0}', github.event.inputs.environment)] }}
</code></pre>
<h3 id="pre-commit-hooks-prevent-accidental-commits">Pre-Commit Hooks: Prevent Accidental Commits</h3>
<h4 id="1-install-git-secrets-aws-tool">1. Install <code>git-secrets</code> (AWS Tool)</h4>
<pre><code># Install git-secrets
git clone https://github.com/awslabs/git-secrets.git
cd git-secrets
sudo make install

# Configure for your repository
cd /path/to/your/repo
git secrets --install
git secrets --register-aws

# Add custom patterns
git secrets --add 'sk_live_[A-Za-z0-9]{32,}'
git secrets --add 'pk_live_[A-Za-z0-9]{32,}'
</code></pre>
<h3 id="if-secrets-are-already-committed-emergency-response">If Secrets Are Already Committed: Emergency Response</h3>
<h4 id="1-immediate-actions">1. Immediate Actions</h4>
<pre><code># 1. Rotate ALL exposed credentials immediately
# - Change API keys in service dashboards
# - Change database passwords
# - Revoke OAuth tokens
# - Regenerate SSH keys

# 2. Remove from git history (if private repo)
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch path/to/secret-file" \
  --prune-empty --tag-name-filter cat -- --all

# 3. Force push (coordinate with team!)
git push origin --force --all
</code></pre>
<h3 id="checklist-secure-git-practices">Checklist: Secure Git Practices</h3>
<p><strong>Before Every Commit:</strong></p>
<ul>
<li>[ ] No API keys, passwords, or tokens in code</li>
<li>[ ] No <code>.env</code> files committed</li>
<li>[ ] No hardcoded credentials</li>
<li>[ ] All secrets use environment variables</li>
<li>[ ] <code>.gitignore</code> includes all secret files</li>
<li>[ ] Pre-commit hooks installed and passing</li>
</ul>
<p><strong>For New Developers:</strong></p>
<ul>
<li>[ ] Read this section on secure git practices</li>
<li>[ ] Copy <code>.env.example</code> to <code>.env</code> (don't commit <code>.env</code>)</li>
<li>[ ] Set up local development environment</li>
<li>[ ] Test that app works with environment variables</li>
<li>[ ] Understand secrets management for your platform (backend/frontend/mobile)</li>
</ul>
<p><strong>For Production Deployments:</strong></p>
<ul>
<li>[ ] All secrets stored in secure vault (AWS Secrets Manager, Vault, etc.)</li>
<li>[ ] Kubernetes secrets created (not in git)</li>
<li>[ ] CI/CD uses GitHub/GitLab secrets (not hardcoded)</li>
<li>[ ] Secrets rotated regularly (quarterly)</li>
<li>[ ] Access to secrets audited and logged</li>
</ul>
<h3 id="tools-summary">Tools Summary</h3>
<table>
<thead>
<tr>
<th><strong>Tool</strong></th>
<th><strong>Purpose</strong></th>
<th><strong>Platform</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git-secrets</strong></td>
<td>Pre-commit hook to detect secrets</td>
<td>All</td>
</tr>
<tr>
<td><strong>detect-secrets</strong></td>
<td>Scan for secrets in code</td>
<td>All</td>
</tr>
<tr>
<td><strong>truffleHog</strong></td>
<td>Scan git history for secrets</td>
<td>All</td>
</tr>
<tr>
<td><strong>BFG Repo-Cleaner</strong></td>
<td>Remove secrets from git history</td>
<td>All</td>
</tr>
<tr>
<td><strong>AWS Secrets Manager</strong></td>
<td>Store secrets in AWS</td>
<td>Backend (AWS)</td>
</tr>
<tr>
<td><strong>HashiCorp Vault</strong></td>
<td>Centralized secrets management</td>
<td>Backend</td>
</tr>
<tr>
<td><strong>Kubernetes Secrets</strong></td>
<td>Store secrets in K8s</td>
<td>Backend (K8s)</td>
</tr>
<tr>
<td><strong>GitHub Secrets</strong></td>
<td>Store secrets for CI/CD</td>
<td>CI/CD</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="knowledge-documentation-standards">Knowledge Documentation Standards</h2>
<h3 id="confluence-space-structure">Confluence Space Structure</h3>
<pre><code>üìÅ Platform Engineering
‚îú‚îÄ‚îÄ üìÑ DevOps Deployment &amp; Updates Guide (this document)
‚îú‚îÄ‚îÄ üìÅ Team Guides
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Core Team Onboarding
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Retail Team Onboarding
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ AML Team Onboarding
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ Redesign Team Onboarding
‚îú‚îÄ‚îÄ üìÅ API Documentation
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ API Versioning Policy
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ OpenAPI Standards
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ API Contract Testing Guide
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Migration Guides
‚îÇ       ‚îú‚îÄ‚îÄ üìÑ User API v2 ‚Üí v3 Migration
‚îÇ       ‚îî‚îÄ‚îÄ üìÑ Payment API v2.5 ‚Üí v3.0 Migration
‚îú‚îÄ‚îÄ üìÅ Kafka Documentation
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Kafka Topic Naming Convention
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Schema Evolution Guide
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Kafka Streams Best Practices
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ Topic Registry
‚îÇ       ‚îú‚îÄ‚îÄ üìÑ core.* topics (Core Team)
‚îÇ       ‚îú‚îÄ‚îÄ üìÑ retail.* topics (Retail Team)
‚îÇ       ‚îî‚îÄ‚îÄ üìÑ aml.* topics (AML Team)
‚îú‚îÄ‚îÄ üìÅ Runbooks
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Deployment Rollback Procedure
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Database Connection Pool Issues
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Kafka Consumer Lag
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ API Gateway 5xx Errors
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ Emergency Procedures
‚îú‚îÄ‚îÄ üìÅ Architecture Decisions
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Why Kanban (No Sprints)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ API Versioning Strategy
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Kafka vs HTTP Communication
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ Database Migration Pattern (Expand-Contract)
‚îú‚îÄ‚îÄ üìÅ Postmortems
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ 2026-01-16 Payment Service Outage (Core Team)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ 2025-12-09 API Timeout Incident (Retail Team)
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ [Archived postmortems...]
‚îî‚îÄ‚îÄ üìÅ On-Call Resources
    ‚îú‚îÄ‚îÄ üìÑ Escalation Contacts
    ‚îú‚îÄ‚îÄ üìÑ On-Call Schedule (PagerDuty)
    ‚îî‚îÄ‚îÄ üìÑ Handoff Checklist
</code></pre>
<h3 id="onboarding-checklist-team-specific">Onboarding Checklist (Team-Specific)</h3>
<p><strong>Core Team New Developer:</strong></p>
<pre><code class="language-markdown">## Week 1: Foundation

**Day 1-2: Access &amp; Setup**
- [x] GitHub access (user-service, auth-service, payment-service repos)
- [x] Jira access (Core Team board)
- [x] Slack channels (#core-team, #deployments, #api-updates, #kanban-sync)
- [x] PagerDuty on-call schedule (added as secondary)
- [x] Datadog dashboard access
- [x] Confluence access (read all Core Team docs)
- [x] Local development environment setup

**Day 3-5: Domain Knowledge**
- [x] Read: DevOps Deployment Guide (this document)
- [x] Read: API Versioning Policy
- [x] Read: Core Team service architecture diagram
- [x] Review: Last 5 postmortems
- [x] Attend: Daily Kanban standup (observe)
- [x] Shadow: Senior developer on code review

## Week 2: Hands-On Practice

**Day 6-8: First Contribution**
- [x] Pick Jira ticket: Simple bug fix (assign yourself)
- [x] Create feature branch: `feature/CORE-XXX-description`
- [x] Write OpenAPI spec (if API change)
- [x] Implement fix + unit tests
- [x] Submit PR (request review from 2 senior devs)
- [x] Address review comments
- [x] Merge to main (after approval)

**Day 9-10: Deployment**
- [x] Watch deployment to DEV (auto-deploy after merge)
- [x] Verify deployment in DEV environment
- [x] Run smoke tests manually
- [x] Participate in daily standup (present your work)

## Week 3: Independence

**Day 11-15: Larger Task**
- [x] Pick larger Jira ticket (standard complexity)
- [x] Design API changes (if needed) + OpenAPI spec
- [x] Implement + write contract tests (Pact)
- [x] Deploy to QA (manual promotion)
- [x] Coordinate with Retail Team (if API consumed by them)
- [x] Lead deployment to Production (supervised)

## Week 4: On-Call Readiness

**Day 16-20: Incident Response**
- [x] Read: Incident Management runbooks
- [x] Participate: Mock incident drill (organized)
- [x] Shadow: On-call engineer during real incident (if occurs)
- [x] Practice: Rollback procedure in staging
- [x] Added to on-call rotation (secondary, starting Week 5)

## Sign-Off

**Completed:** ___________  
**Signed by:**  
- New Developer: ___________
- Core Team Lead: ___________
- Platform Lead: ___________
</code></pre>
<hr />
<h2 id="implementation-roadmap">Implementation Roadmap</h2>
<h3 id="phase-1-foundation-weeks-1-3">Phase 1: Foundation (Weeks 1-3)</h3>
<p><strong>Week 1:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create Confluence space with this guide</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up Slack channels:
<ul>
<li><code>#kanban-sync</code> (daily standups)</li>
<li><code>#deployments</code> (release notifications)</li>
<li><code>#api-updates</code> (API version announcements)</li>
<li><code>#incidents</code> (active incidents)</li>
<li><code>#migrations</code> (database changes)</li>
</ul>
</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Configure PagerDuty with team-specific on-call rotations</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document team ownership in CODEOWNERS file</li>
</ul>
<p><strong>Week 2:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create Jira Kanban board with swimlanes (Retail, Core, AML, Redesign)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set WIP limits per team</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create Jira workflow with DoR/DoD gates</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up release notes auto-generation</li>
</ul>
<p><strong>Week 3:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document OpenAPI standards and templates</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create API versioning policy document</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up Swagger UI for API documentation</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create first runbook (deployment rollback)</li>
</ul>
<h3 id="phase-2-api-governance-automation-weeks-4-7">Phase 2: API Governance &amp; Automation (Weeks 4-7)</h3>
<p><strong>Week 4:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Implement OpenAPI validation in CI/CD (Spectral)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Add breaking change detection (oasdiff)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create API contract testing framework (Pact)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up Pact Broker</li>
</ul>
<p><strong>Week 5:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Implement Slack notifications for deployments (GitHub Actions webhook)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Add team, API version, Kafka topic info to notifications</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create deployment audit table in Postgres</li>
</ul>
<p><strong>Week 6:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up Kafka Schema Registry</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document Kafka topic naming conventions</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create Kafka topic CODEOWNERS rules</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Implement schema validation in CI/CD</li>
</ul>
<p><strong>Week 7:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Test end-to-end: API change ‚Üí OpenAPI validation ‚Üí contract tests ‚Üí deployment</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Conduct first API version migration drill</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Gather feedback from all teams</li>
</ul>
<h3 id="phase-3-incident-management-weeks-8-10">Phase 3: Incident Management (Weeks 8-10)</h3>
<p><strong>Week 8:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document incident severity levels</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create incident response runbooks</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up PagerDuty escalation policies</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Configure Slack incident channel creation</li>
</ul>
<p><strong>Week 9:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create postmortem template</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Train all teams on incident procedures</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Set up Datadog alerts with team-specific routing</li>
</ul>
<p><strong>Week 10:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Conduct incident drill (simulate SEV-2)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Review and improve incident procedures</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Schedule quarterly incident drills</li>
</ul>
<h3 id="phase-4-database-migrations-weeks-11-14">Phase 4: Database Migrations (Weeks 11-14)</h3>
<p><strong>Week 11:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document Flyway configuration</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create migration PR template</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document expand-contract pattern with examples</li>
</ul>
<p><strong>Week 12:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create separate CI/CD pipeline for migrations</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Test migration dry-run on staging</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Implement migration Slack notifications</li>
</ul>
<p><strong>Week 13:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Audit existing migrations for forward-only compliance</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Re-evaluate last 10 production migrations</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Document findings and improvements</li>
</ul>
<p><strong>Week 14:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Train all teams on migration best practices</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Create migration runbooks</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Finalize and approve process</li>
</ul>
<h3 id="phase-5-continuous-improvement-ongoing">Phase 5: Continuous Improvement (Ongoing)</h3>
<p><strong>Monthly:</strong></p>
<ul>
<li>Review Kanban metrics (cycle time, throughput, WIP)</li>
<li>Analyze deployment trends (frequency, success rate, duration)</li>
<li>Review incident patterns (teams, services, root causes)</li>
<li>Update runbooks based on lessons learned</li>
</ul>
<p><strong>Quarterly:</strong></p>
<ul>
<li>Knowledge documentation audit</li>
<li>Incident drill (all teams participate)</li>
<li>Review API deprecation timeline (sunset old versions)</li>
<li>Team retrospective (what's working, what's not)</li>
<li>DORA metrics review</li>
</ul>
<p><strong>Annually:</strong></p>
<ul>
<li>Full process review (DevOps guide update)</li>
<li>Tool evaluation (better alternatives?)</li>
<li>Team training refresh (new hires, new processes)</li>
<li>Architecture review (scaling challenges?)</li>
</ul>
<hr />
<h2 id="quick-reference">Quick Reference</h2>
<h3 id="critical-commands">Critical Commands</h3>
<p><strong>Check deployment status:</strong></p>
<pre><code class="language-bash">kubectl rollout status deployment/service-name -n production
kubectl get pods -n production -l app=service-name
</code></pre>
<p><strong>Rollback immediately:</strong></p>
<pre><code class="language-bash">kubectl rollout undo deployment/service-name -n production
kubectl rollout undo deployment/service-name -n production --to-revision=5
</code></pre>
<p><strong>Scale service under load:</strong></p>
<pre><code class="language-bash">kubectl scale deployment service-name --replicas=15 -n production
</code></pre>
<p><strong>View logs (incident investigation):</strong></p>
<pre><code class="language-bash">kubectl logs -f deployment/service-name -n production --tail=200
</code></pre>
<p><strong>Database queries:</strong></p>
<pre><code class="language-sql">-- Active connections
SELECT * FROM pg_stat_activity;

-- Slow queries
SELECT query, calls, total_time, mean_time
FROM pg_stat_statements
ORDER BY mean_time DESC
LIMIT 20;

-- Connection pool status
SELECT count(*) FROM pg_stat_activity;
</code></pre>
<p><strong>Kafka commands:</strong></p>
<pre><code class="language-bash"># List topics
kafka-topics --list --bootstrap-server kafka:9092

# Consumer lag
kafka-consumer-groups --describe --group group-name --bootstrap-server kafka:9092

# Publish test event
kafka-console-producer --topic retail.order.created --bootstrap-server kafka:9092
</code></pre>
<h3 id="escalation-contacts">Escalation Contacts</h3>
<p><strong>Team Leads:</strong></p>
<ul>
<li>Core Team: @core-team-lead</li>
<li>Retail Team: @retail-team-lead</li>
<li>AML Team: @aml-team-lead</li>
<li>Redesign Team: @redesign-team-lead</li>
<li>Platform: @platform-lead</li>
</ul>
<p><strong>Escalation Path (SEV-1):</strong></p>
<ol>
<li>Team on-call engineer (0-5 min)</li>
<li>Team lead (5-15 min)</li>
<li>Platform lead (15-30 min)</li>
<li>CTO (30+ min or customer-facing)</li>
</ol>
<p><strong>Emergency Contacts:</strong></p>
<ul>
<li>Database DBA: @dba-lead (for data loss risk)</li>
<li>Security Team: @security-lead (for security breaches)</li>
<li>Product Owner: @product-owner (for business decisions)</li>
</ul>
<hr />
<h2 id="final-checklist-ready-for-production">Final Checklist: Ready for Production</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> All teams trained on this guide</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Slack channels created (#kanban-sync, #deployments, #api-updates, #incidents)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> PagerDuty integrated with team-specific rotations</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Jira Kanban board configured (swimlanes, WIP limits, DoR/DoD)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> CODEOWNERS file created and enforced</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> OpenAPI validation in CI/CD (Spectral, oasdiff)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> API contract testing framework (Pact + Pact Broker)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Kafka Schema Registry configured</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Kafka topic naming convention documented</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Deployment notifications to Slack working</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Database migration pipeline (Flyway + notifications)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Incident response roles defined</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Postmortem template in Confluence</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Runbooks created (rollback, database, Kafka, API)</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> First incident drill completed</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Mobile API compatibility testing process defined</li>
</ul>
<p><strong>Sign-Off:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Engineering Manager: _____________ Date: _______</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Platform Lead: _________________ Date: _______</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Core Team Lead: _______________ Date: _______</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Retail Team Lead: _____________ Date: _______</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> AML Team Lead: ________________ Date: _______</li>
<li class="task-list-item"><input disabled="disabled" type="checkbox" checked="checked" /> Redesign Team Lead: ___________ Date: _______</li>
</ul>
<hr />
<p><strong>Document Version:</strong> 2.0<br />
<strong>Last Updated:</strong> December 2025<br />
<strong>Next Review:</strong> March 2026<br />
<strong>Owner:</strong> Platform Team</p>
<p><strong>Teams:</strong></p>
<ul>
<li><strong>Core Team</strong> (2 backend devs): user-service, auth-service, payment-service</li>
<li><strong>Retail Team</strong> (3 backend devs): product-catalog-service, cart-service, checkout-service, order-service</li>
<li><strong>AML Team</strong> (2 backend devs): transaction-monitor-service, compliance-report-service</li>
<li><strong>Redesign Team</strong> (1 backend dev): api-gateway, web-frontend</li>
</ul>

  </main>
</div>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({ 
    startOnLoad: true,
    theme: 'dark',
    themeVariables: {
      primaryColor: '#38bdf8',
      primaryTextColor: '#e5e7eb',
      primaryBorderColor: '#1e293b',
      lineColor: '#38bdf8',
      secondaryColor: '#020617',
      tertiaryColor: '#0f172a',
      background: '#020617',
      mainBkg: '#020617',
      secondBkg: '#0f172a',
      textColor: '#e5e7eb',
      border1: '#1e293b',
      border2: '#1e293b',
      noteBkgColor: '#0f172a',
      noteTextColor: '#e5e7eb',
      noteBorderColor: '#38bdf8',
      actorBorder: '#38bdf8',
      actorBkg: '#020617',
      actorTextColor: '#e5e7eb',
      actorLineColor: '#1e293b',
      signalColor: '#e5e7eb',
      signalTextColor: '#e5e7eb',
      labelBoxBkgColor: '#020617',
      labelBoxBorderColor: '#38bdf8',
      labelTextColor: '#e5e7eb',
      loopTextColor: '#e5e7eb',
      activationBorderColor: '#38bdf8',
      activationBkgColor: '#0f172a',
      sequenceNumberColor: '#e5e7eb',
      sectionBkgColor: '#0f172a',
      altSectionBkgColor: '#020617',
      sectionBorderColor: '#38bdf8',
      excludeBkgColor: '#020617',
      taskBorderColor: '#38bdf8',
      taskBkgColor: '#0f172a',
      taskTextLightColor: '#e5e7eb',
      taskTextColor: '#e5e7eb',
      taskTextDarkColor: '#e5e7eb',
      taskTextOutsideColor: '#e5e7eb',
      taskTextClickableColor: '#38bdf8',
      activeTaskBorderColor: '#38bdf8',
      activeTaskBkgColor: '#0f172a',
      gridColor: '#1e293b',
      doneTaskBkgColor: '#020617',
      doneTaskBorderColor: '#1e293b',
      critBorderColor: '#f97373',
      critBkgColor: '#020617',
      taskTextCriticalColor: '#f97373',
      todayLineColor: '#38bdf8',
      labelColor: '#e5e7eb',
      errorBkgColor: '#f97373',
      errorTextColor: '#e5e7eb'
    }
  });
</script>
</body>
</html>
